(function(e){function t(t){for(var n,i,o=t[0],c=t[1],u=t[2],d=0,h=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&h.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(h.length)h.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0bd9":function(e,t,r){"use strict";var n=r("3759"),a=r.n(n);a.a},"0ca4":function(e,t,r){"use strict";var n=r("2059"),a=r.n(n);a.a},"17fc":function(e,t,r){},2059:function(e,t,r){},"20e7":function(e,t,r){"use strict";var n=r("17fc"),a=r.n(n);a.a},2214:function(e,t,r){"use strict";var n=r("9d7a"),a=r.n(n);a.a},2275:function(e,t,r){},"2bdd":function(e,t,r){},"317e":function(e,t,r){"use strict";var n=r("fd54"),a=r.n(n);a.a},3759:function(e,t,r){},4393:function(e,t,r){"use strict";var n=r("6842"),a=r.n(n);a.a},"44f4":function(e,t,r){},"457f":function(e,t,r){},"4cb3":function(e,t,r){},"4d76":function(e,t,r){},"4f66":function(e,t,r){"use strict";var n=r("4cb3"),a=r.n(n);a.a},"53fe":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=(r("d3b7"),r("bc3a")),s=r.n(a),i={},o=s.a.create(i);o.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=o,window.axios=o,Object.defineProperties(e.prototype,{axios:{get:function(){return o}},$axios:{get:function(){return o}}})},n["a"].use(Plugin);Plugin;var c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"app"}},[r("div",{staticClass:"scroll-block"}),e.error?[r("v-snackbar",{attrs:{"multi-line":!0,color:"error",value:!0,timeout:3e3},on:{input:e.closeError}},[e._v(" "+e._s(e.error.message)+" "),r("v-btn",{attrs:{color:"dark",text:""},on:{click:e.closeError}},[e._v(" Закрыть ")])],1)]:e._e(),e.globalLoading?r("global-loader"):e.user?r("navigation"):r("login")],2)},u=[],l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"api-info"},[r("api_info")],1),r("a",{attrs:{href:"#api-navigation"}},[r("div",{staticClass:"api-info__up-button"},[r("v-icon",{staticClass:"api-info__up-button-icon"},[e._v("mdi-arrow-up")])],1)]),r("v-navigation-drawer",{attrs:{id:"nav-drawer",clipped:e.primaryDrawer.clipped,floating:e.primaryDrawer.floating,"mini-variant":e.primaryDrawer.mini,permanent:"permanent"===e.primaryDrawer.type,temporary:"temporary"===e.primaryDrawer.type,app:""},model:{value:e.primaryDrawer.model,callback:function(t){e.$set(e.primaryDrawer,"model",t)},expression:"primaryDrawer.model"}},[r("branches")],1),r("v-app-bar",{attrs:{id:"v-app-bar","clipped-left":e.primaryDrawer.clipped,height:"35",app:""}},[r("button",{staticClass:"hamburger hamburger--elastic is-active",attrs:{id:"hamburger",type:"button",title:"Переключить меню навигации"},on:{click:[function(t){t.stopPropagation(),e.primaryDrawer.model=!e.primaryDrawer.model},e.hideAPIInfo]}},[r("span",{staticClass:"hamburger-box"},[r("span",{staticClass:"hamburger-inner"})])]),e.user?r("span",{staticClass:"app-bar_username"},[e._v(e._s(e.user.displayed))]):e._e(),r("v-icon",{staticClass:"app-bar__icon",on:{click:e.toggleAccountSettings}},[e._v("mdi-account-cog")]),r("span",{staticClass:"app-bar__online_counter"},[e._v("online: "+e._s(e.usersOnline.length))]),e._v(" "),r("v-spacer"),r("v-icon",{staticClass:"app-bar__icon",on:{click:e.toggleAPIInfo}},[e._v("mdi-api")]),r("v-icon",{staticClass:"app-bar__icon",on:{click:e.logout}},[e._v("mdi-logout")])],1),r("account_settings"),r("v-content",{staticClass:"v-content"},[r("router-view")],1)],1)},d=[],h=(r("96cf"),r("1da1")),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[r("v-dialog",{staticClass:"v-dialog",model:{value:e.usersList,callback:function(t){e.usersList=t},expression:"usersList"}},[r("div",{staticClass:"dialog__content"},[r("div",{staticClass:"dialog__header"},[r("div",{staticClass:"dialog__title"},[r("span",[e._v("Участники форума")])]),r("v-icon",{staticClass:"dialog__close_icon",on:{click:function(t){e.usersList=!1}}},[e._v("mdi-close")])],1),r("div",{staticClass:"dialog__body"},[r("users-list",{attrs:{type:"forum",action:"listUsers"}})],1)])]),r("v-dialog",{staticClass:"v-dialog",model:{value:e.addUsersList,callback:function(t){e.addUsersList=t},expression:"addUsersList"}},[r("div",{staticClass:"dialog__content"},[r("div",{staticClass:"dialog__header"},[r("div",{staticClass:"dialog__title"},[r("span",[e._v("Добавить участников")])]),r("v-icon",{staticClass:"dialog__close_icon",on:{click:function(t){e.addUsersList=!1}}},[e._v("mdi-close")])],1),r("div",{staticClass:"dialog__body"},[r("users-list",{attrs:{type:"forum",action:"addUsers"}})],1)])]),r("v-dialog",{staticClass:"v-dialog",model:{value:e.branchCreation,callback:function(t){e.branchCreation=t},expression:"branchCreation"}},[r("div",{staticClass:"dialog__content"},[r("div",{staticClass:"dialog__header"},[r("div",{staticClass:"dialog__title"},[r("span",[e._v("Новая ветка")])]),r("v-icon",{staticClass:"dialog__close_icon",on:{click:function(t){e.branchCreation=!1}}},[e._v("mdi-close")])],1),r("div",{staticClass:"dialog__body"},[r("v-container",{staticClass:"pa-0 branch-create"},[r("div",{staticClass:"branch-create__form"},[r("v-text-field",{staticClass:"branch-create__title-input",attrs:{counter:"20",label:"Название"},model:{value:e.newBranch.title,callback:function(t){e.$set(e.newBranch,"title",t)},expression:"newBranch.title"}}),r("v-checkbox",{staticClass:"branch-create__private-checkbox",attrs:{label:"Приватная ветка"},model:{value:e.newBranch.is_private,callback:function(t){e.$set(e.newBranch,"is_private",t)},expression:"newBranch.is_private"}}),r("v-btn",{staticClass:"branch-create__submit-button",attrs:{color:"primary"},on:{click:e.createBranch}},[e._v("Создать")])],1)])],1)])]),r("div",{staticClass:"forum-drawer__main"},[r("drawer-header"),r("div",{staticClass:"forum-drawer__body"},[r("v-list",{staticClass:"pa-0 drawer-menu",attrs:{color:"error"}},[r("v-list-group",{staticClass:"drawer-menu__group",scopedSlots:e._u([{key:"activator",fn:function(){return[r("v-list-item-icon",[r("v-icon",[e._v("mdi-wrench-outline")])],1),r("v-list-item-title",[e._v("Действия")])]},proxy:!0}])},[r("div",{staticClass:"drawer-menu__item"},[r("v-list-item",{on:{click:function(t){e.branchCreation=!0}}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-plus")])],1),r("v-list-item-title",[e._v("Создать ветку")])],1)],1),r("div",{staticClass:"drawer-menu__item"},[e.currentForum&&e.currentForum.is_private&&(e.currentForum.author.id===e.user.id||e.user.is_staff)?r("v-list-item",{attrs:{link:""},on:{click:function(t){e.addUsersList=!0}}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-account-multiple-plus")])],1),r("v-list-item-title",[e._v("Добавить участников")])],1):e.currentForum&&e.currentForum.is_private?r("v-list-item",{attrs:{link:""},on:{click:function(t){e.usersList=!0}}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-account-multiple")])],1),r("v-list-item-title",[e._v("Участники")])],1):e._e()],1),r("div",{staticClass:"drawer-menu__item"},[e.currentForum&&(e.currentForum.author.id===e.user.id||e.user.is_staff)?r("v-list-item",{attrs:{link:""},on:{click:e.deleteCurrentForum}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-delete")])],1),r("v-list-item-title",[e._v("Удалить форум")])],1):e._e()],1)]),e.currentForum&&e.currentForumBranches&&e.currentForumBranches.length>0?r("v-list-group",{staticClass:"drawer-menu__group",attrs:{value:"true"},scopedSlots:e._u([{key:"activator",fn:function(){return[r("v-list-item-icon",[r("v-icon",[e._v("mdi-file-tree")])],1),r("v-list-item-title",[e._v("Ветки")])]},proxy:!0}],null,!1,2237441870)},[e.currentForumBranches?r("div",e._l(e.currentForumBranches,(function(t){return r("div",{key:t.id,staticClass:"drawer-menu__branch-link",on:{click:function(r){return e.clearUnread(t)}}},[t.is_private&&-1===t.members.indexOf(e.user.id)&&!e.user.is_staff?r("div",{staticClass:"drawer-menu__branch-link__disabled"},[r("v-icon",{staticClass:"drawer-menu__branch-link-icon"},[e._v("mdi-lock")]),r("span",[e._v(e._s(t.title))])],1):r("router-link",{staticClass:"drawer-menu__branch-link__passive",attrs:{"active-class":"drawer-menu__branch-link__active",to:{name:"Forum",params:{forumId:e.currentForum.id,branchId:t.id}}}},[r("div",{on:{click:function(t){return e.setBranchInPrimary(!0)}}},[t.is_private?-1!==t.members.indexOf(e.user.id)||e.user.is_staff?r("v-icon",{staticClass:"drawer-menu__branch-link-icon"},[e._v("mdi-lock-open-variant ")]):e._e():r("v-icon",{staticClass:"drawer-menu__branch-link-icon"},[e._v("mdi-text")]),r("span",[e._v(e._s(t.title))])],1),t.is_unread?r("div",{staticClass:"branch-link-badge"},[r("span",{staticClass:"branch-link-badge__counter"},[e._v(e._s(t.unread_count))])]):e._e()])],1)})),0):e._e()]):r("div",{staticClass:"drawer-menu__no-branches"},[r("span",[e._v("Форум пуст")])])],1)],1)],1)],1)},p=[],_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"forum-drawer-header"},[r("v-row",{staticClass:"forum-drawer-header__top"},[e.currentForum&&e.allForums?r("v-menu",{staticClass:"forum-drawer-header__switch",attrs:{"close-on-click":"","close-on-content-click":"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[r("v-btn",e._g(e._b({staticClass:"forum-drawer-header__switch-button",attrs:{color:"primary"}},"v-btn",a,!1),n),[e.user&&e.currentForum&&e.currentForum.is_private&&(-1!==e.currentForum.members.indexOf(e.user.id)||e.user.is_staff)?r("v-icon",{staticClass:"forum-drawer-header__lock-icon"},[e._v(" mdi-lock-open-variant ")]):e.currentForum&&e.currentForum.is_private?r("v-icon",{staticClass:"forum-drawer-header__lock-icon"},[e._v("mdi-lock")]):e._e(),e._v(" "+e._s(e.currentForum.title)+" ")],1)]}}],null,!1,28969814),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[r("v-list",e._l(e.allForums,(function(t){return r("v-list-item",{key:t.id,on:{click:function(r){return e.setCurrentForum(t)}}},[e.user&&t&&t.is_private&&(-1!==t.members.indexOf(e.user.id)||e.user.is_staff)?r("v-icon",{staticClass:"forum-drawer-header__lock-icon"},[e._v(" mdi-lock-open-variant ")]):e.user&&t&&t.is_private?r("v-icon",{staticClass:"forum-drawer-header__lock-icon"},[e._v("mdi-lock")]):e._e(),r("v-list-item-title",{staticClass:"forum-drawer-header__switch-item"},[e._v(e._s(t.title))])],1)})),1)],1):e._e(),r("div",{staticClass:"forum-drawer-header__create-forum"},[r("div",{staticClass:"forum-drawer-header__create-forum-button",on:{click:e.toggleForumCreateForm}},[r("v-icon",{staticClass:"create-forum-button__icon"},[e._v("mdi-plus")])],1),r("div",{staticClass:"forum-drawer-header__create-forum-form"},[r("forum-create")],1)])],1)],1)},v=[],f=(r("c975"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[r("div",{staticClass:"forum-create__form"},[r("div",{staticClass:"forum-create__form-top"},[r("v-text-field",{attrs:{counter:"20",label:"Новый форум"},model:{value:e.newForum.title,callback:function(t){e.$set(e.newForum,"title",t)},expression:"newForum.title"}}),r("div",{staticClass:"forum-create__send-button-wrapper",on:{click:e.createForum}},[r("v-icon",{staticClass:"forum-create__send-button"},[e._v("mdi-send")])],1)],1),r("div",{staticClass:"forum-create__form-bottom"}),r("v-checkbox",{staticClass:"forum-create__private-checkbox",attrs:{dense:"","hide-details":"",label:"Приватный"},model:{value:e.newForum.is_private,callback:function(t){e.$set(e.newForum,"is_private",t)},expression:"newForum.is_private"}})],1)])}),g=[],b={name:"ForumCreate",data:function(){return{newForum:{title:null,is_private:!1}}},methods:{createForum:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("createForum",e.newForum);case 2:e.$store.dispatch("getAllForums"),e.toggleForumCreateForm();case 4:case"end":return t.stop()}}),t)})))()},toggleForumCreateForm:function(){var e=document.getElementsByClassName("forum-drawer-header__create-forum-form")[0];"none"!==e.style.display&&e.style.display?e.style.display="none":e.style.display="inherit"}}},C=b,w=(r("56de"),r("c42a"),r("2877")),x=r("6544"),y=r.n(x),k=r("ac7c"),T=r("a523"),B=r("132d"),E=r("8654"),S=Object(w["a"])(C,f,g,!1,null,"7593170e",null),$=S.exports;y()(S,{VCheckbox:k["a"],VContainer:T["a"],VIcon:B["a"],VTextField:E["a"]});var L={name:"ForumDrawerHeader",components:{"forum-create":$},data:function(){return{value:!1}},computed:{user:function(){return this.$store.getters.getCurrentUser},allForums:function(){return this.$store.getters.getAllForumsList},currentForum:function(){return this.$store.getters.getCurrentForum}},methods:{toggleForumCreateForm:function(){var e=document.getElementsByClassName("forum-drawer-header__create-forum-form")[0];"none"!==e.style.display&&e.style.display?e.style.display="none":e.style.display="inherit"},setCurrentForum:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.is_private&&-1===e.members.indexOf(t.user.id)&&!t.user.is_staff&&t.user.id!==e.author.id){r.next=5;break}return r.next=3,t.$store.dispatch("setCurrentForum",e);case 3:return r.next=5,t.$store.dispatch("getForumValues",{currentForumId:e.id});case 5:case"end":return r.stop()}}),r)})))()}}},P=L,R=(r("71c5"),r("8336")),U=r("8860"),j=r("da13"),O=r("5d23"),I=r("e449"),F=r("0fd9"),A=Object(w["a"])(P,_,v,!1,null,"2389a512",null),V=A.exports;y()(A,{VBtn:R["a"],VIcon:B["a"],VList:U["a"],VListItem:j["a"],VListItemTitle:O["a"],VMenu:I["a"],VRow:F["a"]});var D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"users_list"},[r("div",{staticClass:"users_list__search"},[r("div",{staticClass:"users_list__search_area"},[r("input",{staticClass:"users_list__search_input",class:e.searchClassName,attrs:{type:"text",placeholder:"Начните ввод имени"}}),r("div",{staticClass:"users_list__search_icon",on:{click:e.search}},[r("v-icon",[e._v("mdi-magnify")])],1)])]),r("div",{staticClass:"users_list__divider"}),r("div",{staticClass:"users_list__list"},[e._l(e.filteredList,(function(t){return r("div",{key:t.id,staticClass:"users_list__user_line"},[r("div",{staticClass:"users_list__user_data"},[r("img",{staticClass:"users_list__user_avatar",attrs:{src:t.avatar_url,alt:""}}),r("span",{staticClass:"users_list__user_name"},[e._v(e._s(t.displayed))])]),-1===e.currentObject.members.indexOf(t.id)&&e.currentObject.is_private&&t.id!==e.currentObject.author.id&&(e.currentUser.id===e.currentObject.author.id||e.currentUser.is_staff)&&"addUsers"===e.action?r("div",{staticClass:"users_list__add_button",on:{click:function(r){return e.addMember(t)}}},[r("v-icon",[e._v("mdi-plus")])],1):e.currentObject.is_private&&t.id!==e.currentObject.author.id&&(e.currentUser.id===e.currentObject.author.id||e.currentUser.is_staff)&&"addUsers"===e.action?r("div",{staticClass:"users_list__remove_button",on:{click:function(r){return e.removeMember(t)}}},[r("v-icon",[e._v("mdi-close")])],1):e._e()])})),e.filteredList&&!e.filteredList[0]?r("div",{staticClass:"users_list__no_search_results"},[r("span",[e._v("Поиск не дал результатов.")])]):e._e()],2)])},N=[],z=(r("99af"),r("4de4"),r("4160"),r("ac1f"),r("841c"),r("2ca0"),r("159b"),{name:"UsersList",props:["type","action"],data:function(){return{filteredList:!1}},computed:{currentUser:function(){return this.$store.getters.getCurrentUser},allUsersList:function(){return this.$store.getters.getUsersList},targetList:function(){var e=this;if("addUsers"===this.action&&this.allUsersList){var t=[],r=[];return this.allUsersList.forEach((function(n){-1!==e.currentObject.members.indexOf(n.id)?t.push(n):r.push(n)})),t=t.concat(r),t}if("listUsers"===this.action&&this.allUsersList){var n=[];return this.allUsersList.forEach((function(t){-1!==e.currentObject.members.indexOf(t.id)&&n.push(t)})),n}return[]},currentObject:function(){return"forum"===this.type?this.$store.getters.getCurrentForum:"branch"===this.type?this.$store.getters.getCurrentBranch:{}},searchClassName:function(){return"users_list__search_input_"+this.type}},methods:{addMember:function(e){"forum"===this.type?this.$store.dispatch("addForumMember",{user:e,forum:this.$store.getters.getCurrentForum}):"branch"===this.type&&this.$store.dispatch("addBranchMember",{user:e,branch:this.$store.getters.getCurrentBranch})},removeMember:function(e){"forum"===this.type?this.$store.dispatch("removeForumMember",{user:e,forum:this.$store.getters.getCurrentForum}):"branch"===this.type&&this.$store.dispatch("removeBranchMember",{user:e,branch:this.$store.getters.getCurrentBranch})},search:function(){this.filteredList=this.targetList;var e=document.getElementsByClassName(this.searchClassName)[0].value.toUpperCase();this.filteredList=this.filteredList.filter((function(t){return t.displayed.toUpperCase().startsWith(e)}))}},created:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getUsersList");case 2:e.filteredList=e.targetList;case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=document.getElementsByClassName(this.searchClassName)[0];e.addEventListener("keyup",this.search),this.filteredList=this.targetList}}),H=z,M=(r("7cf9"),Object(w["a"])(H,D,N,!1,null,"6123b04c",null)),G=M.exports;y()(M,{VIcon:B["a"]});var q={name:"ForumDrawer",components:{"drawer-header":V,"users-list":G},data:function(){return{addUsersList:!1,usersList:!1,branchCreation:!1,newBranch:{title:null,is_private:!1,parent_forum:null}}},computed:{allForums:function(){return this.$store.getters.getAllForumsList},currentForumBranches:function(){return this.$store.getters.getCurrentForumChildren},currentForum:function(){return this.$store.getters.getCurrentForum},currentBranch:function(){return this.$store.getters.getCurrentBranch},currentThread:function(){return this.$store.getters.getCurrentThread},user:function(){return this.$store.getters.getCurrentUser}},methods:{setBranchInPrimary:function(e){this.$store.dispatch("setBranchInPrimary",e)},clearUnread:function(e){e.is_unread=null},deleteCurrentForum:function(){this.$store.dispatch("deleteForum",this.currentForum)},createBranch:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.newBranch.parent_forum=e.$store.getters.getCurrentForum.id,t.next=3,e.$store.dispatch("createBranch",e.newBranch);case 3:return t.next=5,e.$store.dispatch("getForumChildren",e.$store.getters.getCurrentForum);case 5:e.branchCreation=!1;case 6:case"end":return t.stop()}}),t)})))()}}},X=q,K=(r("af5a"),r("4f66"),r("f48d"),r("169a")),Z=r("56b0"),W=r("34c3"),J=Object(w["a"])(X,m,p,!1,null,"7d903ce6",null),Q=J.exports;y()(J,{VBtn:R["a"],VCheckbox:k["a"],VContainer:T["a"],VDialog:K["a"],VIcon:B["a"],VList:U["a"],VListGroup:Z["a"],VListItem:j["a"],VListItemIcon:W["a"],VListItemTitle:O["a"],VTextField:E["a"]});var Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"account_settings"},[r("div",{staticClass:"account_settings__window_top"},[r("div",{staticClass:"account_settings__user_info"},[e.previewImageSrc?r("div",{staticClass:"account_settings__user_avatar"},[r("img",{attrs:{src:e.previewImageSrc,alt:""}})]):r("div",{staticClass:"account_settings__user_avatar"},[r("img",{attrs:{src:e.user.avatar_url,alt:""}})]),r("div",[r("div",{staticClass:"account_settings__user_displayed"},[r("p",[e._v(e._s(e.user.displayed))])]),r("div",{staticClass:"account_settings__user_messages"},[r("p",[e._v("Сообщений: "+e._s(e.user.messages_count))])]),r("div",{staticClass:"account_settings__user_carma"},[r("p",[e._v("Репутация: "+e._s(e.user.carma))])])])]),r("div",{staticClass:"account_settings__top_controls"},[r("v-icon",{staticClass:"account_settings__icon",on:{click:e.setAvatar}},[e._v("mdi-content-save")]),r("v-icon",{staticClass:"account_settings__icon",on:{click:e.closeAccountSettings}},[e._v("mdi-chevron-up")])],1)]),r("v-file-input",{staticClass:"account_settings__avatar_input_field",attrs:{id:"avatar-input",color:"black","prepend-icon":"mdi-camera",accept:"image/*","show-size":"",counter:"",label:"Изменить аватар",requierd:""},on:{change:e.loadImage}})],1)},ee=[],te={name:"AccountSettings",data:function(){return{UpdatedProfile:null,previewImage:null,previewImageSrc:null}},computed:{user:function(){return this.$store.getters.getCurrentUser},threads:function(){return this.$store.getters.getCurrentBranchChildren},posts:function(){return this.$store.getters.getCurrentThreadChildren}},created:function(){this.UpdatedProfile=this.user},methods:{setAvatar:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("updateUser",e.UpdatedProfile);case 2:r=e.$store.getters.getCurrentBranchChildren,n=e.$store.getters.getCurrentThreadChildren,a=n.concat(r),a.push(e.currentThread),a.forEach((function(t){try{t.author.id===e.user.id&&(t.author.avatar_url=e.previewImageSrc)}catch(r){r instanceof TypeError&&(r.code=200)}})),e.user.avatar_url=e.previewImageSrc,e.$store.dispatch("setAccountSettingsWindowStatus",!1),delete e.UpdatedProfile.avatar;case 10:case"end":return t.stop()}}),t)})))()},loadImage:function(){var e=this,t=document.getElementById("avatar-input"),r=t.files[0],n=new FileReader;n.onload=function(t){e.previewImageSrc=n.result},n.readAsDataURL(r),this.UpdatedProfile.avatar=r},closeAccountSettings:function(){this.$store.dispatch("setAccountSettingsWindowStatus",!1)}}},re=te,ne=(r("317e"),r("23a7")),ae=Object(w["a"])(re,Y,ee,!1,null,"68b70072",null),se=ae.exports;y()(ae,{VFileInput:ne["a"],VIcon:B["a"]});var ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__body"},[r("div",{staticClass:"api-info__content"},[e._m(0),e._m(1),e._m(2),e._m(3),e._m(4),e._m(5),e.apiKey?r("div",{staticClass:"api-info__code"},[e._v(" "+e._s(e.user.displayed)+", ваш уникальный токен для доступа к API: "),r("pre",[e._v(e._s(e.apiKey)+"\n        ")])]):e._e(),e._m(6),e._m(7),e._m(8),e._m(9),e._m(10),e._m(11),e._m(12),e._m(13),e._m(14),e._m(15),e._m(16),e._m(17),e._m(18),e._m(19),e._m(20),e._m(21),e._m(22),e._m(23),e._m(24),e._m(25),e._m(26),e._m(27),e._m(28),e._m(29),e._m(30),e._m(31),e._m(32),e._m(33),e._m(34),e._m(35),e._m(36),e._m(37),e._m(38),e._m(39),e._m(40),e._m(41),e._m(42),e._m(43),e._m(44),e._m(45),e._m(46),e._m(47),e._m(48),e._m(49)])])},oe=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__title",attrs:{id:"api-navigation"}},[r("h1",[e._v("Документация API")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__navigation"},[r("ul",{staticClass:"api-info__links"},[r("li",[r("a",{staticClass:"api-info__head-link",attrs:{href:"#project-about"}},[e._v("0. Описание проекта")])]),r("li",[r("a",{staticClass:"api-info__head-link",attrs:{href:"#auth"}},[e._v("1. Авторизация")])]),r("li",[r("a",{attrs:{href:"#auth-token-get"}},[e._v("1.1 Получить токен авторизации используя логин и пароль")])]),r("li",[r("a",{attrs:{href:"#auth-register"}},[e._v("1.2 Создание нового пользователя, получение спика всех пользователей")])]),r("li",[r("a",{attrs:{href:"#auth-user"}},[e._v("1.3 Получение/редактирование/удаление пользователя")])]),r("li",[r("a",{attrs:{href:"#auth-online"}},[e._v("1.4 Получение списка пользователей в сети")])]),r("li",[r("a",{staticClass:"api-info__head-link",attrs:{href:"#forum"}},[e._v("2. Форумы")])]),r("li",[r("a",{attrs:{href:"#forum-list"}},[e._v("2.1 Получение списка всех форумов")])]),r("li",[r("a",{attrs:{href:"#forum-new"}},[e._v("2.2 Создание нового форума")])]),r("li",[r("a",{attrs:{href:"#forum-details"}},[e._v("2.3 Получение/редактирование/удаление форума")])]),r("li",[r("a",{attrs:{href:"#forum-children"}},[e._v("2.4 Получение веток форума")])]),r("li",[r("a",{attrs:{href:"#forum-members"}},[e._v("2.5 Добавление/удаление участника в закрытый форум")])]),r("li",[r("a",{staticClass:"api-info__head-link",attrs:{href:"#branch"}},[e._v("3. Ветки")])]),r("li",[r("a",{attrs:{href:"#branch-new"}},[e._v("3.1 Создание новой ветки")])]),r("li",[r("a",{attrs:{href:"#branch-details"}},[e._v("3.2 Получение/редактирование/удаление ветки")])]),r("li",[r("a",{attrs:{href:"#branch-children"}},[e._v("3.3 Получение тем ветки")])]),r("li",[r("a",{attrs:{href:"#branch-members"}},[e._v("3.4 Добавление участника в закрытую ветку")])]),r("li",[r("a",{staticClass:"api-info__head-link",attrs:{href:"#thread"}},[e._v("4. Темы")])]),r("li",[r("a",{attrs:{href:"#thread-new"}},[e._v("4.1 Создание новой темы")])]),r("li",[r("a",{attrs:{href:"#thread-details"}},[e._v("4.2 Получение/удаление/редактирование темы")])]),r("li",[r("a",{attrs:{href:"#thread-children"}},[e._v("4.3 Получение списка сообщений в теме")])]),r("li",[r("a",{attrs:{href:"#thread-reaction"}},[e._v("4.4 Установка реакции на тему")])]),r("li",[r("a",{staticClass:"api-info__head-link",attrs:{href:"#post"}},[e._v("5. Сообщения")])]),r("li",[r("a",{attrs:{href:"#post-new"}},[e._v("5.1 Создать новое сообщение")])]),r("li",[r("a",{attrs:{href:"#post-details"}},[e._v("5.2 Получение/удаление/редактирование сообщения")])]),r("li",[r("a",{attrs:{href:"#post-reaction"}},[e._v("5.3 Установка реакции на сообщение")])])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__title",attrs:{id:"project-about"}},[r("h1",[e._v("Описание проекта")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__project-description"},[r("p",[e._v("Данное вэб-приложение разрабатывается мною в целях самообучения. Его использование реальными пользователями не запланировано."),r("br"),e._v(" Это мессенджер, по своей структуре схожий со Slack. Бэкенд написан на Django + Django Rest Framework, а фронтенд представляет собой SPA, написанное на Vue js с использованием Vuex, VueRouter, Vuetify.")]),r("p",[e._v("В качестве основной базы данных я использовал postgresql, а так же redis в качестве брокера сообщений для celery и для хранения онлайн-сессий пользователей.")]),r("p",[e._v("Авторизация в API производится посредствам токенов, за основу взята библиотека joser."),r("br"),e._v(" Авторизация через социальные сети реализована при помощи google firebase на фронтенде, на бэкенд отправляются uid пользователя (он уникален для любого пользователя firebase и выглядит примерно так: UWQhELQTgfhTejn2FKFtoh1PzO73) в качестве логина и он же в хешированом виде в качестве пароля (сериалайзер модели пользователя не выдаёт информацию о логине и пароле клиентской стороне), а так же передаётся прочяя информация, необходимая для создания полноценного пользователя(ссылка на аватар, отоброжаемое имя и.т.п)."),r("br"),e._v(" Фиксация онлайна пользователей реализована при помощи expire-записей в redis. Продолжительность сессии устанавливается в настройках django-проекта.")]),r("p",[e._v("Аватары пользователей после загрузки сжимаются пропорционально до заданных размеров и хранятся на AWS S3 Cloud, как и прочие медиа файлы проекта. Допустимые параметры изображений, разрешенных к загрузке, а так же параметры сжатия устанавливаются в настройках django проекта. Аватары пользователей делятся на 3 группы: по умолчанию, аватар из сторонних источников и загруженный пользователем аватар. Приоритет их отображения следующий: В первую очередь отображается автар, загруженный пользователем, если он отсутствует, показывается аватар из стороннего источника (полученный, например, при OAuth авторизации), если же отсутствует и он, отображается аватар по умолчанию.")]),r("p",[e._v("Структурно приложение представляет собой форумы, включающие в себя ветки, которые, в свою очередь, включают в себя темы, состоящие из сообщений."),r("br"),e._v(" Реализована возможность создавать закрытые форумы и ветки, с функцией добавления в них участников создателем. В окне добавления участников создан реактивный поиск с фильтрацией списка по символам, с которых пользователь начинает ввод."),r("br"),e._v(" Темы и сообщения выдаются пагинированно и добавляются в ленту при помощи бесконечного скролла."),r("br"),e._v(" Валидация данных большей своей частью реализуется на серверной стороне. Настроены соответствующие пермишены для пользователей."),r("br"),e._v(" Приложение я старался сделать максимально адаптивным. На маленьких экранах у основного компонента, отображающего список тем, появляется возможность показывать сообщения, а компонент, отвечавший за отображение сообщений, исчезает. Так же высота приложения адаптируется под высоту вьюпорта при скрытии адресной строки в мобильном браузере google chrome.")]),r("p",[e._v("Для тем и сообщений проработана система рейтинга. Пользователь имеет возможность их оценить негативно или положительно. Эти действия оказывают влияние на общую репутацию автора сообщения, которая отоброжается под его аватаром. Изменения происходят в реактивном режиме с выполнением соответствующих AJAX-запросов в фоне."),r("br"),e._v(" Так же каждая тема и сообщение имеет фиксацию пользователей, запрашивающих её, на этом основывается система отоброжения количества непрочитанных пользователем тем в ветке и сообщений в теме.")]),r("p",[e._v("В формах отправки сообщений имеется поддержка эмоджи. Эмоджи хранятся в уникод символах и парсятся с последующей заменой на изображения при маунте компонента, содержащего их.")]),r("p",[e._v("У меня было большое желание использовать celery, но не было очевидных идей для его применения, потому я решил приспособить его для отслежования завершений пользовательских сессий. Был написан мидлвэр, логирующий запросы пользователя на сервер, хранящий логи в redis. И по завершении пользовательской сессии лог запросов пользователя с кодами ответов сервера отправляется мне на e-mail, а логи удаляются из базы. Эта информация теоретически будет полезна в выявлении некорректных ответов сервера, а так же производить общий анализ действий пользователей в приложении. Для мониторинга деятельности celery был подключен flower, который можно обнаружить на 5555 порту.")]),r("p",[e._v("Так же в бэкенд приложения интегрирован логгер Sentry.")]),r("p",[e._v("Сервер - nginx, запущен на vps от яндекс облака. Деплой приложеня осуществлялся при помощи Docker. За исключением базы данных, она развернута в файловой системе сервера. Так же я подключил к нему, имеющийся у меня домен.")]),r("p",[e._v("На этом я заканчиваю описание проделанной мною на данный момент работы, но не заканчиваю работу над этим приложением, есть еще много фич, которые я хотел бы реализовать и много багов, которые хочу пофиксить. Благодарю вас, за уделенное время и внимание к моему скромному проекту, надеюсь, оно потрачено не зря! :)")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__title",attrs:{id:"auth"}},[r("h1",[e._v("Авторизация")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle"},[r("p",[e._v('API приложения использует токен-авторизацию, для его использования вашим запросам понадобится заголовок "Authorization" со значением формата "Token XXXXXXXXXXXXXXXXXXX", где вместо символов X будет находиться ваш токен авторизации.')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"auth-token-get"}},[r("p",[e._v("Получить токен авторизации используя логин и пароль:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("/api/v1/auth/token/login/\nAllowed methods: POST\nContent-Type: application/json\n")]),e._v(" Привер запроса: "),r("pre",[e._v('request: /api/v1/auth/token/login/\nmethod: POST\n\n{\n    "password": "password",\n    "username": "username"\n}\n')]),e._v(" Пример ответа: "),r("pre",[e._v('response: Http 200 OK\n\n{\n    "auth_token": "##################################"\n}\n')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"auth-register"}},[r("p",[e._v("Создание нового пользователя, получение спика всех пользователей")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("/api/v1/auth/users/\nAllowed methods: GET, POST\nContent-Type: application/json\n")]),e._v(" Пример запроса: "),r("pre",[e._v('request: /api/v1/auth/users/\nmethod: POST\n\n{\n    "email": "test@test.test",\n    "avatar": null,     // файл или null\n    "displayed": "Тестовый пользовватель",\n    "foreign_avatar_url": "",     // ссылка на аватар из сторонних источников\n    "username": "testUser",\n    "password": "test12345"\n}\n')]),e._v(" Пример ответа: "),r("pre",[e._v('response: Http 201 Created\n{\n    "email": "test@test.test",\n    "avatar": null,\n    "displayed": "Тестовый пользовватель",\n    "foreign_avatar_url": "",\n    "username": "testUser",\n    "id": 11\n}\n')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"auth-user"}},[r("p",[e._v("Получение/редактирование/удаление пользователя")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("/api/v1/auth/users/{User ID}/\nAllowed methods: GET, PUT, DELETE\nContent-Type: application/json\n")]),e._v(" Пример запроса: "),r("pre",[e._v('request: /api/v1/auth/users/1/\nmethod: GET\n\nresponse: Http 200 OK\n{\n    "id": 2,\n    "is_staff": false,\n    "displayed": "Василий Широков",\n    "avatar_url": "https://lh6.googleusercontent.com/-EvSu4MLsFwk/AAAAAAAAAAI/AAAAAAAAAMs/AMZuuckj83_A3_8FOw4O3kUIKSgpfwDhzg/photo.jpg",\n    "messages_count": 13,\n    "carma": 2\n}\n')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"auth-online"}},[r("p",[e._v("Получение списка пользователей в сети")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("/api/v1/auth/online/\nAllowed methods: GET, DELETE\n")]),e._v(" Пример: "),r("pre",[e._v('request: /api/v1/auth/online/\nmethod: GET\n\nresponse: Http 200 OK\n{\n    "users_online": [\n        {\n            "id": 1,\n            "is_staff": true,\n            "displayed": "Joost",\n            "avatar_url": "https://jooster.s3.amazonaws.com/media/images/avatars/1/avatar.jpeg",\n            "messages_count": 39,\n            "carma": 5\n        },\n        {\n            "id": 2,\n            "is_staff": false,\n            "displayed": "Василий Широков",\n            "avatar_url": "https://lh6.googleusercontent.com/-EvSu4MLsFwk/AAAAAAAAAAI/AAAAAAAAAMs/AMZuuckj83_A3_8FOw4O3kUIKSgpfwDhzg/photo.jpg",\n            "messages_count": 13,\n            "carma": 2\n        }\n    ]\n}\n')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__title",attrs:{id:"forum"}},[r("h1",[e._v("Форумы")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"forum-list"}},[r("p",[e._v("Получение списка всех форумов:")]),r("br")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("api/v1/forum/all/\nAllowed methods: GET\n")]),e._v(" Пример: "),r("pre",[e._v('request: api/v1/forum/all/\nmethod: GET\n\nresponse: Http 200 OK\n[\n  {\n    "id": 1,\n    "author": {\n        "id": 1,\n        "email": "vasiliishirokov@gmail.com",\n        "is_staff": true,\n        "displayed": "Василий Широков",\n        "avatar_url": "https://jooster.s3.amazonaws.com/media/images/avatars/1/avatar.jpeg",\n        "messages_count": 2,\n        "carma": 0\n    },\n    "children_count": 2,\n    "title": "Первый форум",\n    "description": "",\n    "pub_date": "2020-08-12T08:24:40.102245+03:00",\n    "is_private": false,\n    "members": []\n  },\n  {\n    "id": 13,\n    "author": {\n        "id": 9,\n        "email": "ksenof@greece.gc",\n        "is_staff": false,\n        "displayed": "Ксенофонт",\n        "avatar_url": "https://jooster.s3.amazonaws.com/media/images/avatars/9/avatar.jpeg",\n        "messages_count": 8,\n        "carma": 3\n    },\n    "children_count": 0,\n    "title": "Закрытый форум",\n    "description": "",\n    "pub_date": "2020-08-26T01:21:14.047858+03:00",\n    "is_private": true,\n    "members": [\n        9\n    ]\n  },\n]\n        ')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"forum-new"}},[r("p",[e._v("Создание нового форума:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("api/v1/forum/add/\nAllowed methods: POST\n")]),e._v(" Пример запроса: "),r("pre",[e._v('request: api/v1/forum/add/\nmethod: POST\nContent-Type: application/json\n\n{\n    "title": "Forum Title",\n    "is_private": false\n}\n')]),e._v(" Пример ответа: "),r("pre",[e._v('response: Http 201 Created\n{\n    "id": 1,\n    "title": "Forum Title",\n    "description": "",\n    "pub_date": "2020-08-26T02:23:48.278039+03:00",\n    "is_private": false,\n    "members": []\n}\n        ')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"forum-details"}},[r("p",[e._v("Получение/редактирование/удаление форума:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("api/v1/forum/{forum ID}/\nAllowed methods: GET, PUT, DELETE\nContent-Type: application/json\n")]),e._v(" Пример: "),r("pre",[e._v('request: api/v1/forum/11/\nmethod: GET\n\nresponse: Http 200 OK\n {\n    "id": 11,\n    "author": {\n        "id": 2,\n        "is_staff": false,\n        "displayed": "Василий Широков",\n        "avatar_url": "https://jooster.s3.amazonaws.com/media/images/avatars/2/avatar.png",\n        "messages_count": 13,\n        "carma": 2\n    },\n    "children_count": 6,\n    "title": "Закрытый форум",\n    "description": "",\n    "pub_date": "2020-08-19T02:12:48.653386+03:00",\n    "is_private": true,\n    "members": [\n        2,\n        4,\n        3\n    ]\n }\n        ')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"forum-children"}},[r("p",[e._v("Получение веток форума:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("api/v1/forum/{forum ID}/children/\nAllowed methods: GET\n")]),e._v(" Пример: "),r("pre",[e._v('request: api/v1/forum/11/children/\nmethod: GET\n\nresponse: Http 200 OK\n [\n    {\n        "id": 8,\n        "author": {\n            "id": 6,\n            "email": "lao@china.ch",\n            "is_staff": false,\n            "displayed": "Лао-Цзы",\n            "avatar_url": "https://jooster.s3.amazonaws.com/media/images/avatars/6/avatar.jpeg",\n            "messages_count": 12,\n            "carma": 11\n        },\n        "children_count": 2,\n        "unread_count": 2,\n        "title": "Ветка второго форума",\n        "pub_date": "2020-08-26T00:32:43.389788+03:00",\n        "is_private": false,\n        "parent_forum": 11,\n        "members": []\n    },\n    {\n        "id": 10,\n        "author": {\n            "id": 6,\n            "email": "lao@china.ch",\n            "is_staff": false,\n            "displayed": "Лао-Цзы",\n            "avatar_url": "https://jooster.s3.amazonaws.com/media/images/avatars/6/avatar.jpeg",\n            "messages_count": 12,\n            "carma": 11\n        },\n        "children_count": 0,\n        "unread_count": 0,\n        "title": "Еще ветка",\n        "pub_date": "2020-08-26T03:31:34.649334+03:00",\n        "is_private": false,\n        "parent_forum": 11,\n        "members": []\n    }\n ]\n        ')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"forum-members"}},[r("p",[e._v("Добавление/удаление участника в закрытый форум:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("api/v1/forum/{Forum ID}/membership/{User ID}/\nAllowed methods: POST, DELETE\nContent-Type: application/json\nBody: Empty\n")]),e._v(" Пример: "),r("pre",[e._v('request: api/v1/forum/1/membership/1/\nMethod: POST\nBody: Empty\n\nresponse: Http 201 Created\n{\n    "user": 1,\n    "forum": 1\n}\n')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__title",attrs:{id:"branch"}},[r("h1",[e._v("Ветки")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"branch-new"}},[r("p",[e._v("Создание новой ветки:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("api/v1/branch/add/\nAllowed methods: POST\nContent-Type: application/json\n")]),e._v(" Пример запроса: "),r("pre",[e._v('request: api/v1/branch/add/\nmethod: POST\n\n{\n    "title": "Branch Title",\n    "is_private": false,\n    "parent_forum": 14\n}\n')]),e._v(" Пример ответа: "),r("pre",[e._v('response: Http 201 Created\n{\n    "id": 5,\n    "title": "Branch Title",\n    "pub_date": "2020-08-26T02:28:59.775412+03:00",\n    "is_private": false,\n    "parent_forum": 1,\n    "members": []\n}\n')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"branch-details"}},[r("p",[e._v("Получение/редактирование/удаление ветки:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("api/v1/branch/{Branch ID}/\nAllowed methods: GET, PUT, DELETE\nContent-Type: application/json\n")]),e._v(" Пример: "),r("pre",[e._v('request api/v1/branch/3/\nmethod: GET\n\nresponse: Http 200 OK\n{\n    "id": 3,\n    "author": {\n        "id": 2,\n        "is_staff": false,\n        "displayed": "Василий Широков",\n        "avatar_url": "https://jooster.s3.amazonaws.com/media/images/avatars/2/avatar.png",\n        "messages_count": 13,\n        "carma": 2\n    },\n    "children_count": 2,\n    "unread_count": 0,\n    "title": "Закрытая ветка",\n    "pub_date": "2020-08-18T23:47:01.333892+03:00",\n    "is_private": true,\n    "parent_forum": 1,\n    "members": [\n        1,\n        2\n    ]\n}\n')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"branch-children"}},[r("p",[e._v("Получение тем ветки:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("api/v1/branch/{Branch ID}/children/\nAllowed methods: GET\n")]),e._v(" Пример: "),r("pre",[e._v('request: api/v1/branch/1/children/\nmethod: GET\n\nresponse: Http 200 OK\n{\n  "count": 32,\n  "next": "http://joost.su/api/v1/branch/1/children/?page=2",\n  "previous": null,\n  "results": [\n      {\n          "id": 41,\n          "author": {\n              "id": 1,\n              "is_staff": true,\n              "displayed": "Joost",\n              "avatar_url": "https://jooster.s3.amazonaws.com/media/images/avatars/1/avatar.jpeg",\n              "messages_count": 39,\n              "carma": 5\n          },\n          "children_count": 0,\n          "unread_count": 0,\n          "carma": 0,\n          "users_liked_list": [],\n          "users_disliked_list": [],\n          "text": "Thread Text",\n          "pub_date": "2020-08-26T02:41:58.536156+03:00",\n          "parent_forum": 1,\n          "parent_branch": 1,\n          "viewers": [\n              1,\n              2\n          ],\n          "parent_branch_title": "Первая ветка"\n      },\n      {\n          "id": 40,\n          "author": {\n              "id": 1,\n              "is_staff": true,\n              "displayed": "Joost",\n              "avatar_url": "https://jooster.s3.amazonaws.com/media/images/avatars/1/avatar.jpeg",\n              "messages_count": 39,\n              "carma": 5\n          },\n          "children_count": 0,\n          "unread_count": 0,\n          "carma": 0,\n          "users_liked_list": [],\n          "users_disliked_list": [],\n          "text": "123",\n          "pub_date": "2020-08-25T01:15:03.525682+03:00",\n          "parent_forum": 1,\n          "parent_branch": 1,\n          "viewers": [\n              1,\n              5,\n              2\n          ],\n          "parent_branch_title": "Первая ветка"\n      }\n  ]\n}\n')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"branch-members"}},[r("p",[e._v("Добавление участника в закрытую ветку:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("api/v1/branch/{Branch ID}/membership/{User ID}/\nAllowed methods: POST, DELETE\nBody: Empty\n")]),e._v(" Пример: "),r("pre",[e._v('request: api/v1/branch/1/membership/1/\nmethod: POST\nbody: Empty\n\nresponse: HTTP 201 Created\n{\n    "user": 1,\n    "branch": 1\n}\n')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__title",attrs:{id:"thread"}},[r("h1",[e._v("Темы")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"thread-new"}},[r("p",[e._v("Создание новой темы:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("api/v1/thread/add/\nAllowed methods: POST\nContent-Type: application/json\n")]),e._v(" Пример запроса: "),r("pre",[e._v('request: api/v1/thread/add/\nmethod: POST\n\n{\n    "text": "Thread Text",\n    "parent_branch": 1\n}\n')]),e._v(" Пример ответа: "),r("pre",[e._v('response: Http 201 Created\n{\n    "id": 41,\n    "text": "Thread Text",\n    "pub_date": "2020-08-26T02:41:58.536156+03:00",\n    "parent_forum": 1,\n    "parent_branch": 1,\n    "likes": [],\n    "viewers": []\n}\n')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"thread-details"}},[r("p",[e._v("Получение/удаление/редактирование темы:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("api/v1/thread/{Thread ID}/\nAllowed methods: GET, PUT, DELETE\nContent-Type: application/json\n")]),e._v(" Пример: "),r("pre",[e._v('request: api/v1/thread/1/\nmethod: GET\n\nresponse: Http 200 OK\n{\n    "id": 1,\n    "author": {\n        "id": 1,\n        "is_staff": true,\n        "displayed": "Joost",\n        "avatar_url": "https://jooster.s3.amazonaws.com/media/images/avatars/1/avatar.jpeg",\n        "messages_count": 39,\n        "carma": 5\n    },\n    "children_count": 1,\n    "unread_count": 1,\n    "carma": 1,\n    "users_liked_list": [\n        2\n    ],\n    "users_disliked_list": [],\n    "text": "1",\n    "pub_date": "2020-08-13T00:31:59.880739+03:00",\n    "parent_forum": 1,\n    "parent_branch": 1,\n    "viewers": [\n        4,\n        2,\n        1,\n        9\n    ],\n    "parent_branch_title": "Первая ветка"\n}\n')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"thread-children"}},[r("p",[e._v("Получение списка сообщений в теме:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("api/v1/thread/{Thread ID}/children/\nAllowed methods: GET\n")]),e._v(" Пример: "),r("pre",[e._v('request: api/v1/thread/43/children/\nmethod: GET\n\nresponse: Http 200 OK\n{\n    "count": 2,\n    "next": null,\n    "previous": null,\n    "results": [\n        {\n            "id": 60,\n            "author": {\n                "id": 10,\n                "email": "makiavelli@italy.ik",\n                "is_staff": false,\n                "displayed": "Никколо Макиавелли",\n                "avatar_url": "https://jooster.s3.amazonaws.com/media/images/avatars/10/avatar.jpeg",\n                "messages_count": 8,\n                "carma": 2\n            },\n            "carma": 0,\n            "users_liked_list": [],\n            "users_disliked_list": [],\n            "text": "Умы бывают трех родов: один все постигает сам; другой может понять то, что постиг первый; третий — сам ничего не постигает и постигнутого другим понять не может. Первый ум — выдающийся, второй — значительный, третий — негодный.",\n            "pub_date": "2020-08-26T01:10:06.445314+03:00",\n            "parent_forum": 1,\n            "parent_branch": 1,\n            "parent_thread": 43,\n            "viewers": [\n                1,\n                6,\n                10\n            ]\n        },\n        {\n            "id": 54,\n            "author": {\n                "id": 7,\n                "email": "conf@china.ch",\n                "is_staff": false,\n                "displayed": "Конфуций",\n                "avatar_url": "https://jooster.s3.amazonaws.com/media/images/avatars/7/avatar.jpeg",\n                "messages_count": 11,\n                "carma": 4\n            },\n            "carma": 0,\n            "users_liked_list": [],\n            "users_disliked_list": [],\n            "text": "Если вы самый умный человек в комнате, то вы не в той комнате, где должны находиться.",\n            "pub_date": "2020-08-26T01:03:41.067056+03:00",\n            "parent_forum": 1,\n            "parent_branch": 1,\n            "parent_thread": 43,\n            "viewers": [\n                1,\n                6,\n                7,\n                10\n            ]\n        }\n    ]\n}\n')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"thread-reaction"}},[r("p",[e._v("Установка реакции на тему:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("api/v1/thread/{Thread ID}/like/\nAllowed methods: POST, DELETE\nContent-Type: application/json\n")]),e._v(" Пример запроса: "),r("pre",[e._v('request: api/v1/thread/2/like/\nmethod: POST\n\n{\n    "like": false\n  // False - для дизлайка, True - для лайка.\n  // При наличии дизлайка, первый лайк отменяет дизлайк, второй идёт в счёт лайка и наоборот.\n}\n')]),e._v(" Пример ответа: "),r("pre",[e._v('response: Http 201 Created\n{\n    "thread": 2,\n    "like": false\n}\n')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__title",attrs:{id:"post"}},[r("h1",[e._v("Сообщения")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"post-new"}},[r("p",[e._v("Создать новое сообщение:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("api/v1/post/add/\nAllowed methods: POST\nContent-Type: application/json\n")]),e._v(" Пример запроса: "),r("pre",[e._v('request: api/v1/post/add/\nmethod: POST\n\n{\n    "text": "Post Text",\n    "parent_thread": 1\n}\n')]),e._v(" Пример ответа: "),r("pre",[e._v('response: Http 201 Created\n{\n    "id": 20,\n    "text": "Post Text",\n    "pub_date": "2020-08-26T02:43:56.605610+03:00",\n    "parent_thread": 1,\n    "parent_forum": 1,\n    "parent_branch": 1,\n    "likes": [],\n    "viewers": []\n}\n')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"post-details"}},[r("p",[e._v("Получение/удаление/редактирование сообщения:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("api/v1/post/{Post ID}/\nAllowed methods: GET PUT DELETE\nContent-Type: application/json\n")]),e._v(" Пример: "),r("pre",[e._v('request: api/v1/post/1/\nmethod: GET\n\nresponse: Http 200 OK\n{\n    "id": 1,\n    "author": {\n        "id": 1,\n        "is_staff": true,\n        "displayed": "Joost",\n        "avatar_url": "https://jooster.s3.amazonaws.com/media/images/avatars/1/avatar.jpeg",\n        "messages_count": 39,\n        "carma": 5\n    },\n    "carma": 0,\n    "users_liked_list": [],\n    "users_disliked_list": [],\n    "text": "1",\n    "pub_date": "2020-08-13T00:33:03.186998+03:00",\n    "parent_forum": 1,\n    "parent_branch": 1,\n    "parent_thread": 21,\n    "viewers": [\n        1,\n        5,\n        2\n    ]\n}\n')])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__subtitle",attrs:{id:"post-reaction"}},[r("p",[e._v("Установка реакции на сообщение:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"api-info__code"},[e._v(" Путь: "),r("pre",[e._v("api/v1/post/{Post ID}/like/\nAllowed methods: POST, DELETE\nContent-Type: application/json\n")]),e._v(" Пример запроса: "),r("pre",[e._v('request: api/v1/post/1/like/\nmethod: POST\n\n{\n    "like": false\n  // False - для дизлайка, True - для лайка.\n  // При наличии дизлайка, первый лайк отменяет дизлайк, второй идёт в счёт лайка и наоборот.\n}\n')]),e._v(" Пример ответа: "),r("pre",[e._v('response: Http 201 Created\n{\n    "post": 1,\n    "like": false\n}\n')])])}],ce={name:"APIInfo",computed:{apiKey:function(){return this.$store.getters.getAuthToken},user:function(){return this.$store.getters.getCurrentUser}}},ue=ce,le=(r("aef9"),Object(w["a"])(ue,ie,oe,!1,null,"3017b863",null)),de=le.exports,he={components:{branches:Q,account_settings:se,api_info:de},name:"Navigation",data:function(){return{drawers:["Default (no property)","Permanent","Temporary"],primaryDrawer:{model:null,type:"default (no property)",clipped:!0,floating:!1,mini:!1}}},methods:{logout:function(){this.$store.dispatch("logoutUser",this.loginData)},toggleAccountSettings:function(){this.accountSettingsIsShown?this.$store.dispatch("setAccountSettingsWindowStatus",!1):this.$store.dispatch("setAccountSettingsWindowStatus",!0)},onlineChecker:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){this.$store.dispatch("getUsersOnline")},t.next=3,setInterval(r.bind(e),6e4);case 3:case"end":return t.stop()}}),t)})))()},hamburgerController:function(){var e=document.getElementById("hamburger");"translateX(0%)"===document.querySelector("nav").style.transform?e.classList.add("is-active"):e.classList.remove("is-active")},toggleAPIInfo:function(){var e=document.getElementsByClassName("api-info")[0],t=document.getElementsByClassName("api-info__up-button")[0];"translateX(0px)"===e.style.transform?(e.style.transform="translateX(-100%)",t.style.transform="translateY(200%)"):(e.style.transform="translateX(0px)",t.style.transform="translateY(-10%)")},hideAPIInfo:function(){var e=document.getElementsByClassName("api-info__up-button")[0],t=document.getElementsByClassName("api-info")[0];"translateX(0px)"===t.style.transform&&(t.style.transform="translateX(-100%)",e.style.transform="translateY(200%)",this.primaryDrawer.model=!0)}},computed:{user:function(){return this.$store.getters.getCurrentUser},accountSettingsIsShown:function(){return this.$store.getters.accountSettingsIsShown},usersOnline:function(){return this.$store.getters.getUsersOnline}},updated:function(){this.hamburgerController()},mounted:function(){this.hamburgerController(),this.onlineChecker()}},me=he,pe=(r("d499"),r("40dc")),_e=r("a75b"),ve=r("f774"),fe=r("2fa4"),ge=Object(w["a"])(me,l,d,!1,null,"38cb5e81",null),be=ge.exports;y()(ge,{VAppBar:pe["a"],VContent:_e["a"],VIcon:B["a"],VNavigationDrawer:ve["a"],VSpacer:fe["a"]});var Ce=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},we=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"cube-loader"}},[r("div",{staticClass:"caption"},[r("div",{staticClass:"cube-loader"},[r("div",{staticClass:"cube loader-1"}),r("div",{staticClass:"cube loader-2"}),r("div",{staticClass:"cube loader-4"}),r("div",{staticClass:"cube loader-3"})]),r("br"),r("br"),r("span",{staticClass:"label"},[e._v("Загрузка...")])])])}],xe={name:"GlobalLoader"},ye=xe,ke=(r("b5a5"),Object(w["a"])(ye,Ce,we,!1,null,"2db113e6",null)),Te=ke.exports,Be=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("div",{staticClass:"login__animation-bg1"}),r("div",{staticClass:"login__animation-bg1 login__animation-bg2"}),r("div",{staticClass:"login__animation-bg1 login__animation-bg3"}),r("div",{staticClass:"login__content"},[r("div",{staticClass:"login__header"},[r("div",{staticClass:"login__header-title"},[e.registration?e.registration?r("span",[e._v("Регистрация")]):e._e():r("span",[e._v("Авторизация")])])]),r("div",{staticClass:"login__body"},[e.registration?e.registration?r("v-form",{ref:"form",staticClass:"login__register-form",attrs:{"lazy-validation":e.lazy},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{"prepend-icon":"mdi-account",label:"Логин",counter:20,required:"",rules:e.loginRules},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("v-text-field",{attrs:{"prepend-icon":"mdi-lock",label:"Пароль",type:"password",required:"",rules:e.passwordRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-text-field",{attrs:{"prepend-icon":"mdi-lock-question",label:"Введите пароль повторно",type:"password",required:"",rules:e.password_repeatRules},model:{value:e.retryPassword,callback:function(t){e.retryPassword=t},expression:"retryPassword"}}),r("v-text-field",{attrs:{"prepend-icon":"mdi-smart-card",label:"Имя",counter:20,required:"",rules:e.nameRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),r("v-text-field",{attrs:{"prepend-icon":"mdi-smart-card",label:"Фамилия",counter:20,required:"",rules:e.surnameRules},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}}),r("v-text-field",{attrs:{"prepend-icon":"mdi-email",label:"E-mail",type:"email",required:"",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1):e._e():r("v-form",{staticClass:"login__login-form"},[r("v-text-field",{attrs:{"prepend-icon":"mdi-account",label:"Логин",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("v-text-field",{attrs:{"prepend-icon":"mdi-lock",label:"Пароль",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("div",{staticClass:"login__buttons"},[r("div",{staticClass:"login__buttons-left-side"},[e.registration?e._e():r("v-btn",{attrs:{small:""},on:{click:e.createToken}},[e._v("Войти ")]),e.registration?r("v-btn",{staticClass:"login__buttons-button",attrs:{small:"",disabled:!e.valid||e.loading,loading:e.loading},on:{click:e.createUser}},[e._v("Создать ")]):e._e(),r("v-btn",{staticClass:"d-none d-sm-flex login__buttons-button",attrs:{small:""},on:{click:e.loginGoogle}},[e._v("с помощью Google ")]),r("v-btn",{staticClass:"d-flex d-sm-none login__buttons-button",attrs:{small:""},on:{click:e.loginGoogle}},[e._v("Google ")])],1),r("div",{staticClass:"login__buttons-right-side"},[e.registration?e._e():r("v-btn",{staticClass:"login__buttons-button",attrs:{small:""},on:{click:function(t){e.registration=!e.registration}}},[e._v("Регистрация ")]),e.registration?r("v-btn",{staticClass:"login__buttons-button",attrs:{small:""},on:{click:function(t){e.registration=!e.registration}}},[e._v("Отмена ")]):e._e()],1)])],1)])])},Ee=[],Se=(r("b0c0"),{name:"Login",data:function(){var e=this;return{registration:!1,valid:!0,loading:!1,username:"",password:"",retryPassword:"",email:"",name:"",surname:"",loginRules:[function(e){return!!e||"Введите логин"},function(e){return e.length<=20||"Длинна не должна превышать 20 символов"},function(e){return/^[A-Za-z]([.A-Za-z0-9-]{1,18})([A-Za-z0-9])$/.test(e)||'Логин должен состоять из латинских букв, цифр, символов "-", ".", и начинаться с буквы. '}],passwordRules:[function(e){return!!e||"Введите пароль"},function(e){return e.length<=127||"Длинна пароля не должна превышать 127 символов"},function(e){return e.length>=8||"Длинна пароля не должна быть менее 8 символов"},function(e){return/(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z!@#$%^&*]{8,}/.test(e)||"Пароль должен содержать маленькие и заглавные буквы латинского алфавита и цифры."}],password_repeatRules:[function(e){return!!e||"Введите праоль"},function(t){return t&&t===e.password||"Пароли не соответствуют"}],nameRules:[function(e){return!!e||"Введите ваше имя"},function(e){return/^['A-Za-z\u0410-\u044F][ '\x2DA-Za-z\u0410-\u044F]+['A-Za-z\u0410-\u044F]?$/.test(e)||"Имя введено некорректно."},function(e){return e.length<=20||"Длинна не должна превышать 20 символов"}],surnameRules:[function(e){return!!e||"Введите вашу фамилию"},function(e){return/^['A-Za-z\u0410-\u044F][ '\x2DA-Za-z\u0410-\u044F]+['A-Za-z\u0410-\u044F]?$/.test(e)||"Фамилия введена некорректно."},function(e){return e&&e.length<=20||"Длинна не должна превышать 20 символов"}],emailRules:[function(e){return!!e||"Введите E-mail"},function(e){return/^((([0-9A-Za-z]{1}[\x2D0-9A-z]+[0-9A-Za-z]{1})|([0-9\u0410-\u044F]{1}[\x2D0-9\u0410-\u044F]+[0-9\u0410-\u044F]{1}))@([\x2DA-Za-z]+\.){1,2}[\x2DA-Za-z]{2,})$/.test(e)||"Некорректный E-mail"}],lazy:!1}},computed:{displayed:function(){return this.name+" "+this.surname},token:function(){return this.$store.getters.getAuthToken},user:function(){return this.$store.getters.getCurrentUser}},methods:{logout:function(){this.$store.dispatch("logoutUser",this.loginData)},createToken:function(){this.$store.dispatch("loginUser",{username:this.username,password:this.password})},createUser:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=11;break}return t.prev=1,e.loading=!0,t.next=5,e.$store.dispatch("createNewUser",{username:e.username,password:e.password,email:e.email,displayed:e.displayed});case 5:e.loading=!1,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.loading=!1;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},destroyToken:function(){this.$store.dispatch("destroyAuthToken")},loginGoogle:function(){this.$store.dispatch("loginGoogle")}}}),$e=Se,Le=(r("4393"),r("4bd4")),Pe=Object(w["a"])($e,Be,Ee,!1,null,"ce349350",null),Re=Pe.exports;y()(Pe,{VBtn:R["a"],VForm:Le["a"],VTextField:E["a"]});var Ue={name:"App",data:function(){return{}},components:{navigation:be,"global-loader":Te,login:Re},methods:{closeError:function(){this.$store.dispatch("clearError")}},computed:{error:function(){return this.$store.getters.error},user:function(){return this.$store.getters.getCurrentUser},loading:function(){return this.$store.getters.loading},globalLoading:function(){return this.$store.getters.globalLoading}},created:function(){this.$store.dispatch("checkForLocalAuthToken"),this.$store.dispatch("getUsersOnline")}},je=Ue,Oe=(r("5c0b"),r("7496")),Ie=r("2db4"),Fe=Object(w["a"])(je,c,u,!1,null,null,null),Ae=Fe.exports;y()(Fe,{VApp:Oe["a"],VBtn:R["a"],VSnackbar:Ie["a"]});var Ve=r("8c4f"),De=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"main"}},[r("v-text-field",{attrs:{label:"Login"},model:{value:e.registerData.username,callback:function(t){e.$set(e.registerData,"username",t)},expression:"registerData.username"}}),r("v-text-field",{attrs:{label:"E-mail",type:"email"},model:{value:e.registerData.email,callback:function(t){e.$set(e.registerData,"email",t)},expression:"registerData.email"}}),r("v-text-field",{attrs:{label:"Password",type:"password"},model:{value:e.registerData.password,callback:function(t){e.$set(e.registerData,"password",t)},expression:"registerData.password"}}),r("v-text-field",{attrs:{label:"Repeat password",type:"password"},model:{value:e.password_check,callback:function(t){e.password_check=t},expression:"password_check"}}),r("v-btn",{on:{click:e.createUser}},[e._v("Создать")])],1)},Ne=[],ze={name:"Register",data:function(){return{password_check:"",registerData:{email:"",username:"",password:""}}},methods:{createUser:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.registerData.displayed=e.registerData.username,t.next=3,e.$store.dispatch("createNewUser",e.registerData);case 3:case"end":return t.stop()}}),t)})))()}},computed:{}},He=ze,Me=Object(w["a"])(He,De,Ne,!1,null,null,null),Ge=Me.exports;y()(Me,{VBtn:R["a"],VTextField:E["a"]});var qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{attrs:{id:"forum","no-gutters":""}},[r("v-col",{attrs:{lg:"7",md:"6",id:"forum__primary"}},[r("topics")],1),r("v-col",{staticClass:"d-none d-sm-flex d-md-flex ",attrs:{lg:"5",md:"6",id:"forum__secondary"}},[r("thread")],1)],1)},Xe=[],Ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"pa-0"},[r("v-dialog",{staticClass:"v-dialog",model:{value:e.usersList,callback:function(t){e.usersList=t},expression:"usersList"}},[r("div",{staticClass:"dialog__content"},[r("div",{staticClass:"dialog__header"},[r("div",{staticClass:"dialog__title"},[r("span",[e._v("Участники ветки")])]),r("v-icon",{staticClass:"dialog__close_icon",on:{click:function(t){e.usersList=!1}}},[e._v("mdi-close")])],1),r("div",{staticClass:"dialog__body"},[r("users-list",{attrs:{type:"branch",action:"listUsers"}})],1)])]),r("v-dialog",{staticClass:"v-dialog",model:{value:e.addUsersList,callback:function(t){e.addUsersList=t},expression:"addUsersList"}},[r("div",{staticClass:"dialog__content"},[r("div",{staticClass:"dialog__header"},[r("div",{staticClass:"dialog__title"},[r("span",[e._v("Добавить участника")])]),r("v-icon",{staticClass:"dialog__close_icon",on:{click:function(t){e.addUsersList=!1}}},[e._v("mdi-close")])],1),r("div",{staticClass:"dialog__body"},[r("users-list",{attrs:{type:"branch",action:"addUsers"}})],1)])]),e.branchInPrimary?r("v-row",{staticClass:"primary-view__main",attrs:{"no-gutters":"",align:"stretch"}},[r("v-col",{staticClass:"primary-view__header",attrs:{cols:"12"}},[r("div",{staticClass:"header__info"},[r("div",{staticClass:"header__title"},[e.currentBranch?r("span",[e._v("#"+e._s(e.currentBranch.title.toLowerCase()))]):e._e()]),e.currentBranch?r("div",{staticClass:"header__subtitle"},[e.currentBranch.is_private?r("div",{staticClass:"header__subtitle-content"},[r("span",[e._v("закрытая ветка")]),e.user&&e.currentBranch&&(e.user.id===e.currentBranch.author.id||e.user.is_staff)?r("div",{staticClass:"subtitle-members-counter",on:{click:function(t){e.addUsersList=!0}}},[r("v-icon",{staticClass:"subtitle-members-counter__icon"},[e._v("mdi-account-multiple")]),r("span",{staticClass:"subtitle-members-counter__count"},[e._v(e._s(e.currentBranch.members.length))]),r("v-icon",{staticClass:"subtitle-members-counter__icon subtitle-members-counter__add-member-button"},[e._v("mdi-plus ")])],1):r("div",{staticClass:"subtitle-members-counter",on:{click:function(t){e.usersList=!0}}},[r("v-icon",{staticClass:"subtitle-members-counter__icon"},[e._v("mdi-account-multiple")]),r("span",{staticClass:"subtitle-members-counter__count"},[e._v(e._s(e.currentBranch.members.length))])],1)]):r("div",{staticClass:"header__subtitle-content"},[e._v("открытая ветка")]),e.user.id===e.currentBranch.author.id||e.user.is_staff?r("div",{staticClass:"primary-view__header-delete-button",on:{click:e.deleteBranch}},[r("v-icon",[e._v("mdi-delete")])],1):e._e()]):e._e()]),r("div",{staticClass:"primary-view__header-button",on:{click:e.refreshBranch}},[r("v-icon",[e._v("mdi-refresh")])],1)]),r("v-col",{staticClass:"primary-view__body",attrs:{cols:"12",id:"primary-view__threads-body"},on:{scroll:e.threadsScrollHandler}},[e.currentBranchThreads?r("div",{attrs:{id:"primary__threads"}},[e.primaryLoading?r("local-loader"):e._e(),e._l(e.currentBranchThreads,(function(e){return r("forum-post",{key:e.id,attrs:{post:e,type:"thread"}})}))],2):e._e()]),e.branchInPrimary?r("post-form",{staticClass:"primary-view__bottom-form",attrs:{type:"thread"}}):e._e()],1):r("v-row",{staticClass:"primary-view__main",attrs:{"no-gutters":"",align:"stretch"}},[r("v-col",{staticClass:"primary-view__header",attrs:{cols:"12"}},[r("div",{staticClass:"header__info"},[r("div",{staticClass:"header__title"},[e.currentThread?r("span",[e._v("обсуждение #"+e._s(e.currentThread.id))]):e._e()]),r("div",{staticClass:"header__subtitle header__subtitle__link"},[e.currentThread?r("span",{on:{click:e.setParrentBranchInPrimary}},[e._v(" #"+e._s(e.currentThread.parent_branch_title.toLowerCase())+" ")]):e._e()])]),r("div",{staticClass:"header__back-button",on:{click:function(t){return e.setBranchInPrimary(!0)}}},[r("v-icon",[e._v("mdi-arrow-left")])],1),r("div",{staticClass:"primary-view__header-button",on:{click:e.refreshThread}},[r("v-icon",[e._v("mdi-refresh")])],1)]),r("v-col",{staticClass:"primary-view__body",attrs:{cols:"12",id:"primary-view__posts-body"},on:{scroll:e.postsScrollHandler}},[!e.threadNextPageUrl&&e.currentThread?r("forum-post",{attrs:{post:e.currentThread,threadStarter:"true",type:"post"}}):e._e(),e.currentThreadPosts?r("div",{attrs:{id:"primary__posts"}},[e.primaryLoading?r("local-loader"):e._e(),e._l(e.currentThreadPosts,(function(e){return r("forum-post",{key:e.id,attrs:{post:e,type:"post"}})}))],2):e._e()],1),e.branchInPrimary?e._e():r("post-form",{staticClass:"primary-view__bottom-form",attrs:{type:"post"}})],1)],1)},Ze=[],We=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"post",class:e.postClass,attrs:{fluid:""}},[r("div",{staticClass:"post__left-side"},[r("v-avatar",{staticClass:"post__avatar"},[r("v-img",{attrs:{src:e.post.author.avatar_url}}),-1!==e.usersOnlineIds.indexOf(e.post.author.id)?r("div",{staticClass:"post_online_indicator"}):e._e()],1),r("span",{staticClass:"post__user_rating"},[e._v(e._s(e.post.author.carma))]),r("div",{staticClass:"post__rating_options"},[e.user.id===e.post.author.id?r("div",{staticClass:"post__rating_icon disabled_icon"},[r("v-icon",[e._v("mdi-minus")])],1):-1!==e.post.users_disliked_list.indexOf(e.user.id)?r("div",{staticClass:"post__rating_icon rating_minus rating_disliked"},[r("v-icon",[e._v("mdi-minus")])],1):r("div",{staticClass:"post__rating_icon rating_minus",on:{click:function(t){return e.dislikePost(e.post)}}},[r("v-icon",[e._v("mdi-minus")])],1),r("span",{staticClass:"post__post_rating"},[e._v(e._s(e.post.carma))]),e.user.id===e.post.author.id?r("div",{staticClass:"post__rating_icon disabled_icon"},[r("v-icon",[e._v("mdi-plus")])],1):-1!==e.post.users_liked_list.indexOf(e.user.id)?r("div",{staticClass:"post__rating_icon rating_plus rating_liked"},[r("v-icon",[e._v("mdi-plus")])],1):r("div",{staticClass:"post__rating_icon rating_plus",on:{click:function(t){return e.likePost(e.post)}}},[r("v-icon",[e._v("mdi-plus")])],1)])],1),r("div",{staticClass:"post__right-side"},[r("div",{staticClass:"post__header"},[r("div",{staticClass:"post__author"},[r("span",[e._v(e._s(e.post.author.displayed))])]),r("div",{staticClass:"post__pub-date"},[r("span",[e._v(e._s(e.dateRefactor(e.post.pub_date)))])])]),r("div",{staticClass:"post__divider"},[r("div",{staticClass:"post__divider-part1"}),r("div",{staticClass:"post__divider-part2"})]),r("div",{staticClass:"post__body"},[r("p",{staticClass:"post__text",class:e.postTextClass},[e._v(e._s(e.post.text))])]),r("div",{staticClass:"post__footer"},[r("div",{staticClass:"post__discussion",on:{click:function(t){return e.clearUnread(e.post)}}},["thread"!==e.type||e.threadStarter?e._e():r("router-link",{attrs:{to:{name:"Forum",params:{forumId:e.currentForum.id,branchId:e.currentBranch.id,threadId:e.post.id}}}},[r("div",{on:{click:function(t){return e.setBranchInPrimary(!1)}}},[r("span",{staticClass:"post__discussion-link"},[e._v("обсуждение: "+e._s(e.post.children_count))]),e.post.is_unread>0?r("span",{staticClass:"post__discussion-unread"},[e._v("новых: "+e._s(e.post.is_unread))]):e._e()])])],1),e.user.id===e.post.author.id||e.user.is_staff?r("div",{staticClass:"post__options"},[r("v-icon",{staticClass:"post__icon post__delete-icon",on:{click:function(t){return e.deletePost(e.post)}}},[e._v("mdi-delete")])],1):e._e()])])])},Je=[],Qe=(r("a434"),r("5729")),Ye={name:"ForumPost",props:["post","type","threadStarter"],computed:{user:function(){return this.$store.getters.getCurrentUser},currentBranch:function(){return this.$store.getters.getCurrentBranch},currentThread:function(){return this.$store.getters.getCurrentThread},currentForum:function(){return this.$store.getters.getCurrentForum},postClass:function(){return"post-"+this.post.id},postTextClass:function(){return"thread"===this.type||this.threadStarter?"thread-"+this.post.id+"-text":"post-"+this.post.id+"-text"},usersOnlineIds:function(){var e=[];return this.$store.getters.getUsersOnline.forEach((function(t){e.push(+t.id)})),e}},methods:{deletePost:function(e){var t=this;if("post"===this.type?this.$store.dispatch("deletePost",e):"thread"===this.type&&this.$store.dispatch("deleteThread",e),this.user.id===e.author.id){this.user.messages_count--,this.user.carma-=e.carma;var r=this.$store.getters.getCurrentBranchChildren,n=this.$store.getters.getCurrentThreadChildren,a=n.concat(r);a.push(this.currentThread),a.forEach((function(r){r.author.id===e.author.id&&(r.author.carma=t.user.carma)}))}},likePost:function(e){var t=this,r=this.$store.getters.getCurrentBranchChildren,n=this.$store.getters.getCurrentThreadChildren,a=n.concat(r);a.push(this.currentThread),-1===e.users_liked_list.indexOf(this.user.id)&&("post"!==this.type||this.threadStarter?this.$store.dispatch("likeThread",e):this.$store.dispatch("likePost",e),-1===e.users_disliked_list.indexOf(this.user.id)?a.forEach((function(r){r.author.id===e.author.id&&r.author.carma++,r.id===e.id&&r.pub_date===e.pub_date&&(r.users_liked_list.push(t.user.id),r.carma++)})):a.forEach((function(r){if(r.author.id===e.author.id&&r.author.carma++,r.id===e.id&&r.pub_date===e.pub_date){r.carma++;var n=r.users_disliked_list.indexOf(t.user.id);r.users_disliked_list.splice(n,1)}})))},dislikePost:function(e){var t=this,r=this.$store.getters.getCurrentBranchChildren,n=this.$store.getters.getCurrentThreadChildren,a=n.concat(r);a.push(this.currentThread),-1===e.users_disliked_list.indexOf(this.user.id)&&("post"!==this.type||this.threadStarter?this.$store.dispatch("dislikeThread",e):this.$store.dispatch("dislikePost",e),-1===e.users_liked_list.indexOf(this.user.id)?a.forEach((function(r){r.author.id===e.author.id&&r.author.carma--,r.id===e.id&&r.pub_date===e.pub_date&&(r.users_disliked_list.push(t.user.id),r.carma--)})):a.forEach((function(r){if(r.author.id===e.author.id&&r.author.carma--,r.id===e.id&&r.pub_date===e.pub_date){r.carma--;var n=r.users_liked_list.indexOf(t.user.id);r.users_liked_list.splice(n,1)}})))},clearUnread:function(e){e.is_unread=0},setBranchInPrimary:function(e){this.$store.dispatch("setBranchInPrimary",e)},dateRefactor:function(e){var t={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"};return e=new Date(e),e.toLocaleString("ru",t)},emojiHandler:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=function(){return n=Object(h["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Qe["a"].parse(t);case 2:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)},r=function(e){return n.apply(this,arguments)},document.getElementsByClassName(e.postClass).forEach((function(e){return r(e)})),document.getElementsByClassName("emoji").forEach((function(e){e.style.cssText="\n          height: 1em;\n          width: 1em;\n          margin: 0 .05em 0 .1em;\n          vertical-align: -0.1em;\n        "}));case 4:case"end":return t.stop()}}),t)})))()},updateAndMountedHandler:function(){var e=this;document.getElementsByClassName(this.postTextClass).forEach((function(t){t.innerHTML=e.post.text})),this.emojiHandler()}},updated:function(){this.updateAndMountedHandler()},mounted:function(){this.updateAndMountedHandler()}},et=Ye,tt=(r("0bd9"),r("8212")),rt=r("adda"),nt=Object(w["a"])(et,We,Je,!1,null,"463adc07",null),at=nt.exports;y()(nt,{VAvatar:tt["a"],VContainer:T["a"],VIcon:B["a"],VImg:rt["a"]});var st=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"local-loader"},[r("v-layout",{attrs:{row:""}},[r("v-flex",{staticClass:"text-center pt-5",attrs:{xs12:""}},[r("v-progress-circular",{attrs:{size:30,width:3,color:"#363636",indeterminate:""}})],1)],1)],1)},it=[],ot={name:"LocalLoader"},ct=ot,ut=(r("2214"),r("0e8f")),lt=r("a722"),dt=r("490a"),ht=Object(w["a"])(ct,st,it,!1,null,"7abb3ec8",null),mt=ht.exports;y()(ht,{VContainer:T["a"],VFlex:ut["a"],VLayout:lt["a"],VProgressCircular:dt["a"]});var pt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("v-textarea",{staticClass:"regular-input",attrs:{outlined:"","auto-grow":"",rows:"3",label:"Новое сообщение","hide-details":""},model:{value:e.newMessage.text,callback:function(t){e.$set(e.newMessage,"text",t)},expression:"newMessage.text"}}),r("emoji-picker",{attrs:{search:e.search},on:{emoji:e.append},scopedSlots:e._u([{key:"emoji-invoker",fn:function(t){var n=t.events.click;return r("div",{staticClass:"emoji-invoker",on:{click:[e.emojiParse,function(e){return e.stopPropagation(),n(e)}]}},[r("svg",{attrs:{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),r("path",{attrs:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42\n          0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67\n          1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46\n           5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"}})])])}},{key:"emoji-picker",fn:function(t){var n=t.emojis,a=t.insert,s=t.display;return r("div",{},[r("div",{staticClass:"emoji-picker",style:{top:s.y+"px",left:s.x+"px"}},[r("div",{staticClass:"emoji-picker__search"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"},{name:"focus",rawName:"v-focus"}],attrs:{type:"text"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})]),r("div",e._l(n,(function(t,n){return r("div",{key:n},[r("h5",[e._v(e._s(n))]),r("div",{staticClass:"emojis"},e._l(t,(function(t,n){return r("span",{key:n,attrs:{title:n},on:{click:function(e){return a(t)}}},[e._v(e._s(t))])})),0)])})),0)])])}}])}),r("v-icon",{staticClass:"bottom-form__button",on:{click:e.createPost}},[e._v("mdi-send")])],1)},_t=[],vt=r("669f"),ft=r.n(vt),gt={name:"TrainingVue",components:{"emoji-picker":ft.a},data:function(){return{newMessage:{text:""},search:""}},methods:{createPost:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("post"!==e.type){t.next=6;break}return e.newMessage.parent_thread=e.currentThread.id,t.next=4,e.$store.dispatch("createPost",e.newMessage);case 4:t.next=10;break;case 6:if("thread"!==e.type){t.next=10;break}return e.newMessage.parent_branch=e.currentBranch.id,t.next=10,e.$store.dispatch("createThread",e.newMessage);case 10:e.user.messages_count++,e.newMessage.text="";case 12:case"end":return t.stop()}}),t)})))()},append:function(e){this.newMessage.text+=e},emojiParse:function(){return Object(h["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=function(e){return new Promise((function(t){return setTimeout(t,e)}))},e.next=3,t(1);case 3:document.getElementsByClassName("emojis").forEach((function(e){return Qe["a"].parse(e)})),document.getElementsByClassName("emoji").forEach((function(e){e.style.cssText="\n          height: 1em;\n          width: 1em;\n          margin: 0 .05em 0 .1em;\n          vertical-align: -0.1em;\n        "}));case 5:case"end":return e.stop()}}),e)})))()}},directives:{focus:{inserted:function(e){e.focus()}}},props:["type"],computed:{currentThread:function(){return this.$store.getters.getCurrentThread},currentBranch:function(){return this.$store.getters.getCurrentBranch},user:function(){return this.$store.getters.getCurrentUser}}},bt=gt,Ct=(r("0ca4"),r("a844")),wt=Object(w["a"])(bt,pt,_t,!1,null,"10381ac3",null),xt=wt.exports;y()(wt,{VIcon:B["a"],VTextarea:Ct["a"]});var yt={name:"PrimaryView",components:{"forum-post":at,"local-loader":mt,"post-form":xt,"users-list":G},data:function(){return{preventBranchScrollTrigger:!1,preventThreadScrollTrigger:!1,usersList:!1,addUsersList:!1}},computed:{user:function(){return this.$store.getters.getCurrentUser},branchInPrimary:function(){return this.$store.getters.getBranchInPrimary},currentBranchThreads:function(){return this.$store.getters.getCurrentBranchChildren},currentThreadPosts:function(){return this.$store.getters.getCurrentThreadChildren},currentThread:function(){return this.$store.getters.getCurrentThread},currentBranch:function(){return this.$store.getters.getCurrentBranch},currentForum:function(){return this.$store.getters.getCurrentForum},threadNextPageUrl:function(){return this.$store.getters.getThreadNextPageUrl},branchNextPageUrl:function(){return this.$store.getters.getBranchNextPageUrl},currentBranchScrollStart:function(){return this.$store.getters.getCurrentBranchScrollStart},currentThreadScrollStart:function(){return this.$store.getters.getCurrentThreadScrollStart},primaryLoading:function(){return this.$store.getters.primaryLoading}},methods:{setBranchInPrimary:function(e){this.$store.dispatch("setBranchInPrimary",e)},threadNextPage:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.threadNextPageUrl){t.next=4;break}return r=e.$store.getters.getCurrentThread,t.next=4,e.$store.dispatch("getThreadChildren",{thread:r,url:e.threadNextPageUrl});case 4:case"end":return t.stop()}}),t)})))()},branchNextPage:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.branchNextPageUrl){t.next=4;break}return r=e.$store.getters.getCurrentBranch,t.next=4,e.$store.dispatch("getBranchChildren",{branch:r,url:e.branchNextPageUrl});case 4:case"end":return t.stop()}}),t)})))()},threadsScrollHandler:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=document.getElementById("primary-view__threads-body"),!(r.scrollTop<=10&&r.scrollTop>0)||e.preventBranchScrollTrigger){t.next=8;break}return e.preventBranchScrollTrigger=!0,n=document.getElementById("primary-view__threads-body"),e.$store.dispatch("setCurrentBranchBottomScroll",n.scrollHeight+100),t.next=7,e.branchNextPage();case 7:e.preventBranchScrollTrigger=!1;case 8:case"end":return t.stop()}}),t)})))()},postsScrollHandler:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=document.getElementById("primary-view__posts-body"),!(r.scrollTop<=10&&r.scrollTop>0)||e.preventThreadScrollTrigger){t.next=8;break}return e.preventThreadScrollTrigger=!0,n=document.getElementById("primary-view__posts-body"),e.$store.dispatch("setCurrentThreadBottomScroll",n.scrollHeight+100),t.next=7,e.threadNextPage();case 7:e.preventThreadScrollTrigger=!1;case 8:case"end":return t.stop()}}),t)})))()},updateComponentScrollController:function(){var e=document.getElementById("primary__threads"),t=document.getElementById("primary__posts"),r=document.getElementById("primary-view__threads-body"),n=document.getElementById("primary-view__posts-body");r?r.scrollTop=r.scrollHeight-this.$store.getters.getCurrentBranchBottomScroll:n&&(n.scrollTop=n.scrollHeight-this.$store.getters.getCurrentThreadBottomScroll),this.currentBranchScrollStart&&e&&!this.primaryLoading?(e.scrollIntoView(!1),this.$store.dispatch("setCurrentBranchBottomScroll",null),r.scrollTop=r.scrollHeight,this.$store.dispatch("setCurrentBranchScrollStart",!1)):this.currentThreadScrollStart&&t&&!this.primaryLoading&&(t.scrollIntoView(!1),this.$store.dispatch("setCurrentThreadBottomScroll",null),n.scrollTop=n.scrollHeight,this.$store.dispatch("setCurrentThreadScrollStart",!1))},refreshBranch:function(){this.$store.dispatch("clearBranchChildren");var e=this.$store.getters.getCurrentBranch;e&&this.$store.dispatch("getBranchChildren",{branch:e})},refreshThread:function(){this.$store.dispatch("clearThreadChildren");var e=this.$store.getters.getCurrentThread;e&&this.$store.dispatch("getThreadChildren",{thread:e})},setParrentBranchInPrimary:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch("setBranchInPrimary",!0),e.$store.dispatch("getCurrentBranchById",e.currentThread.parent_branch);case 2:case"end":return t.stop()}}),t)})))()},mobileScreenHeightController:function(){try{var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t=document.getElementById("v-app-bar").offsetHeight,r=document.getElementsByClassName("primary-view__header")[0].offsetHeight,n=document.getElementsByClassName("primary-view__bottom-form")[0].offsetHeight,a=document.getElementsByClassName("primary-view__body")[0],s=document.getElementsByClassName("v-navigation-drawer--is-mobile")[0],i=document.getElementsByClassName("api-info")[0],o=document.getElementsByClassName("api-info__up-button")[0];a.style.height=e-t-r-n+"px";var c=e-t;s.style.height=c+"px",i.style.height=c+"px",o.style.top=c-40+"px"}catch(u){u.message=null}},deleteBranch:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("deleteBranch",e.currentBranch);case 2:case"end":return t.stop()}}),t)})))()}},updated:function(){this.updateComponentScrollController()},mounted:function(){this.mobileScreenHeightController(),window.addEventListener("resize",this.mobileScreenHeightController)}},kt=yt,Tt=(r("5966"),r("62ad")),Bt=Object(w["a"])(kt,Ke,Ze,!1,null,"11f44808",null),Et=Bt.exports;y()(Bt,{VCol:Tt["a"],VContainer:T["a"],VDialog:K["a"],VIcon:B["a"],VRow:F["a"]});var St=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"pa-0"},[r("v-row",{attrs:{"no-gutters":"",id:"thread__main",align:"stretch"}},[r("v-col",{attrs:{cols:"12",id:"secondary-view__header"}},[r("div",{staticClass:"header__info"},[r("div",{staticClass:"header__title"},[e.currentThread?r("span",[e._v("обсуждение #"+e._s(e.currentThread.id))]):e._e()]),r("div",{staticClass:"header__subtitle header__subtitle__link"},[e.currentThread?r("span",{on:{click:e.setParrentBranchInPrimary}},[e._v(" #"+e._s(e.currentThread.parent_branch_title.toLowerCase())+" ")]):e._e()])]),r("v-spacer"),r("div",{staticClass:"secondary-view__header-refresh-button",on:{click:e.refreshThread}},[r("v-icon",[e._v("mdi-refresh")])],1)],1),r("v-col",{attrs:{cols:"12",id:"secondary-view__posts-body"},on:{scroll:e.postsScrollHandler}},[!e.threadNextPageUrl&&e.currentThread?r("forum-post",{attrs:{post:e.currentThread,threadStarter:"true",type:"thread"}}):e._e(),r("div",{attrs:{id:"secondary__posts"}},[e.secondaryLoading?r("local-loader"):e._e(),e._l(e.currentThreadPosts,(function(e){return r("forum-post",{key:e.id,attrs:{post:e,type:"post"}})}))],2),r("v-col",{attrs:{cols:"12",id:"secondary-view__bottom-form"}},[r("post-form",{attrs:{type:"post"}})],1)],1)],1)],1)},$t=[],Lt={name:"SecondaryView",components:{"forum-post":at,"local-loader":mt,"post-form":xt},computed:{currentThread:function(){return this.$store.getters.getCurrentThread},currentThreadPosts:function(){return this.$store.getters.getCurrentThreadChildren},currentForum:function(){return this.$store.getters.getCurrentForum},currentBranch:function(){return this.$store.getters.getCurrentBranch},threadNextPageUrl:function(){return this.$store.getters.getThreadNextPageUrl},currentThreadScrollStart:function(){return this.$store.getters.getCurrentThreadScrollStart},secondaryLoading:function(){return this.$store.getters.secondaryLoading}},methods:{threadNextPage:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.threadNextPageUrl){t.next=4;break}return r=e.$store.getters.getCurrentThread,t.next=4,e.$store.dispatch("getThreadChildren",{thread:r,url:e.threadNextPageUrl});case 4:case"end":return t.stop()}}),t)})))()},postsScrollHandler:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=document.getElementById("secondary-view__posts-body"),!(r.scrollTop<=20&&r.scrollTop>0)||e.preventThreadScrollTrigger){t.next=8;break}return e.preventThreadScrollTrigger=!0,n=document.getElementById("secondary-view__posts-body"),e.$store.dispatch("setCurrentThreadBottomScroll",n.scrollHeight+100),t.next=7,e.threadNextPage();case 7:e.preventThreadScrollTrigger=!1;case 8:case"end":return t.stop()}}),t)})))()},updateComponentScrollController:function(){var e=document.getElementById("secondary__posts"),t=document.getElementById("secondary-view__posts-body");t&&(t.scrollTop=t.scrollHeight-this.$store.getters.getCurrentThreadBottomScroll),this.currentThreadScrollStart&&e&&!this.secondaryLoading&&(e.scrollIntoView(!1),this.$store.dispatch("setCurrentThreadBottomScroll",null),t.scrollTop=t.scrollHeight,this.$store.dispatch("setCurrentThreadScrollStart",!1))},refreshThread:function(){this.$store.dispatch("clearThreadChildren");var e=this.$store.getters.getCurrentThread;e&&this.$store.dispatch("getThreadChildren",{thread:e})},setParrentBranchInPrimary:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch("getCurrentBranchById",e.currentThread.parent_branch);case 1:case"end":return t.stop()}}),t)})))()}},updated:function(){this.updateComponentScrollController()}},Pt=Lt,Rt=(r("20e7"),Object(w["a"])(Pt,St,$t,!1,null,"4d503d12",null)),Ut=Rt.exports;y()(Rt,{VCol:Tt["a"],VContainer:T["a"],VIcon:B["a"],VRow:F["a"],VSpacer:fe["a"]});var jt={data:function(){return{}},name:"Forum",components:{topics:Et,thread:Ut},props:["forumId","branchId","threadId"],computed:{startingPoints:function(){return{currentForumId:this.forumId,currentBranchId:this.branchId,currentThreadId:this.threadId}}},created:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getAllForums");case 2:e.$store.dispatch("getForumValues",e.startingPoints),e.windowResizeHandler(),window.addEventListener("resize",e.windowResizeHandler);case 5:case"end":return t.stop()}}),t)})))()},methods:{windowResizeHandler:function(){document.documentElement.clientWidth<595?this.$store.dispatch("setDoubleViewsMode",!1):(this.$store.dispatch("setBranchInPrimary",!0),this.$store.dispatch("setDoubleViewsMode",!0))}},watch:{forumId:{immediate:!0,deep:!0,handler:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.startingPoints.currentForumId=t,!t||t===r){e.next=4;break}return e.next=4,this.$store.dispatch("getForumValues",this.startingPoints);case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},branchId:{immediate:!0,deep:!0,handler:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.startingPoints.currentBranchId=t,!t||t===r){e.next=4;break}return e.next=4,this.$store.dispatch("getForumValues",this.startingPoints);case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},threadId:{immediate:!0,deep:!0,handler:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.startingPoints.currentThreadId=t,!t||t===r){e.next=4;break}return e.next=4,this.$store.dispatch("getForumValues",this.startingPoints);case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()}}},Ot=jt,It=(r("942c"),Object(w["a"])(Ot,qe,Xe,!1,null,"4ed44d7b",null)),Ft=It.exports;y()(It,{VCol:Tt["a"],VRow:F["a"]}),n["a"].use(Ve["a"]);var At,Vt={forumId:+localStorage.getItem("currentForumId"),branchId:+localStorage.getItem("currentBranchId"),threadId:+localStorage.getItem("currentThreadId")};At=Vt.forumId?"/forum/"+Vt.forumId+"/"+Vt.branchId+"/"+Vt.threadId:"/forum/1/1/1";var Dt=[{path:"",redirect:At},{path:"/login",name:"Login",component:Re},{path:"/register",name:"Register",component:Ge},{path:"/forum/",redirect:At},{path:"/forum/:forumId?/:branchId?/:threadId?",name:"Forum",props:!0,component:Ft}],Nt=new Ve["a"]({mode:"history",base:"/",routes:Dt}),zt=Nt,Ht=r("f309");n["a"].use(Ht["a"]);var Mt=new Ht["a"]({theme:{themes:{light:{primary:"#2C3138",secondary:"#FFFFFF",accent:"#F98500",error:"#B2221E"}}}}),Gt=r("2f62"),qt={state:{globalLoading:!1,primaryLoading:!1,secondaryLoading:!1,drawer:!0,error:null},mutations:{setPrimaryLoading:function(e,t){e.primaryLoading=t},setSecondaryLoading:function(e,t){e.secondaryLoading=t},setGlobalLoading:function(e,t){e.globalLoading=t},setError:function(e,t){e.error=t},clearError:function(e){e.error=null},switchDrawer:function(e){e.drawer=!e.drawer}},actions:{setSecondaryLoading:function(e,t){var r=e.commit;r("setSecondaryLoading",t)},setPrimaryLoading:function(e,t){var r=e.commit;r("setPrimaryLoading",t)},setGlobalLoading:function(e,t){var r=e.commit;r("setGlobalLoading",t)},setError:function(e,t){var r=e.commit;r("setError",t)},clearError:function(e,t){var r=e.commit;r("clearError",t)},switchDrawer:function(e){var t=e.commit;t("switchDrawer")}},getters:{primaryLoading:function(e){return e.primaryLoading},secondaryLoading:function(e){return e.secondaryLoading},error:function(e){return e.error},drawerStatus:function(e){return e.drawer},globalLoading:function(e){return e.globalLoading}}},Xt=(r("a15b"),r("1276"),{URL:"http://joost.su/"}),Kt=function(e,t){if(e.response.data)for(var r in e.message="",e.response.data)e.message+=" "+e.response.data[r];else"Network Error"===e.message&&(e.message="Сервер недоступен.");t("setError",e)},Zt=r("59ca"),Wt=r.n(Zt),Jt=(r("ea7b"),{state:{user:null,usersList:null,auth_token:null,usersOnline:[]},mutations:{createAuthToken:function(e,t){e.auth_token=t,localStorage.setItem("auth_token",t),s.a.defaults.headers.common.Authorization="Token "+t,s.a.defaults.headers.common["Content-Type"]="multipart/form-data"},loginUser:function(e,t){e.user=t},logoutUser:function(e){localStorage.removeItem("auth_token"),e.auth_token=null,e.user=null},setUsersList:function(e,t){e.usersList=t},updateUser:function(e,t){e.user=t},setUsersOnline:function(e,t){e.usersOnline=t}},actions:{loginUser:function(e,t){var r=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){var a,i,o,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=function(){i("getUsersOnline")},a=e.commit,i=e.dispatch,a("clearError"),n.prev=3,localStorage.removeItem("auth_token"),n.next=7,s.a.post(Xt.URL+"api/v1/auth/token/login/",t);case 7:return c=n.sent,a("createAuthToken",c.data.auth_token),n.next=11,s.a.get(Xt.URL+"api/v1/auth/users/me/");case 11:return u=n.sent,a("loginUser",u.data),setTimeout(o.bind(r),200),a("setCurrentForum",null),n.next=17,zt.push("/forum/1/1/37/");case 17:n.next=23;break;case 19:throw n.prev=19,n.t0=n["catch"](3),Kt(n.t0,a),n.t0;case 23:case"end":return n.stop()}}),n,null,[[3,19]])})))()},logoutUser:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,r("logoutUser"),t.next=5,s.a.delete(Xt.URL+"api/v1/auth/online/");case 5:s.a.defaults.headers.common.Authorization=null,localStorage.clear(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),t.t0.message=null;case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},destroyAuthToken:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("clearError"),r.prev=2,r.next=5,s.a.post(Xt.URL+"api/v1/token/logout/",{auth_token:t});case 5:n("logoutUser"),r.next=12;break;case 8:throw r.prev=8,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 12:case"end":return r.stop()}}),r,null,[[2,8]])})))()},createNewUser:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.dispatch,n("clearError"),r.prev=2,r.next=5,s.a.post(Xt.URL+"api/v1/auth/users/",t);case 5:return r.next=7,a("loginUser",{username:t.username,password:t.password});case 7:r.next=13;break;case 9:throw r.prev=9,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 13:case"end":return r.stop()}}),r,null,[[2,9]])})))()},updateUser:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:for(i in n=e.commit,n("clearError"),a=new FormData,t)a.append(i,t[i]);return r.prev=4,r.next=7,s.a.put(Xt.URL+"api/v1/auth/users/me/",a,{headers:{"Content-Type":"multipart/form-data"}});case 7:return r.next=9,s.a.get(Xt.URL+"api/v1/auth/users/me/");case 9:o=r.sent,n("loginUser",o.data),r.next=17;break;case 13:throw r.prev=13,r.t0=r["catch"](4),Kt(r.t0,n),r.t0;case 17:case"end":return r.stop()}}),r,null,[[4,13]])})))()},checkForLocalAuthToken:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=function(e){return new Promise((function(t){return setTimeout(t,e)}))},r=e.commit,r("clearError"),!localStorage.getItem("auth_token")){t.next=23;break}return r("setGlobalLoading",!0),a=localStorage.getItem("auth_token"),s.a.defaults.headers.common.Authorization="Token "+a,r("createAuthToken",a),t.next=10,n(500);case 10:return t.prev=10,t.next=13,s.a.get(Xt.URL+"api/v1/auth/users/me/");case 13:i=t.sent,r("loginUser",i.data),r("setGlobalLoading",!1),t.next=23;break;case 18:throw t.prev=18,t.t0=t["catch"](10),r("setGlobalLoading",!1),r("setError",t.t0),t.t0;case 23:case"end":return t.stop()}}),t,null,[[10,18]])})))()},getUsersList:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("clearError"),t.prev=2,t.next=5,s.a.get(Xt.URL+"api/v1/auth/users/");case 5:n=t.sent,r("setUsersList",n.data),t.next=13;break;case 9:throw t.prev=9,t.t0=t["catch"](2),Kt(t.t0,r),t.t0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()},loginGoogle:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,o,c,u,l,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,n=e.dispatch,r("clearError"),r("setGlobalLoading",!0),a=new Wt.a.auth.GoogleAuthProvider,t.next=6,Wt.a.auth().signInWithPopup(a);case 6:return i=t.sent,o=i.user.uid,c=i.user.uid.split("").reverse().join("p"),u=i.user.displayName,l=i.user.email,d=i.user.photoURL,t.prev=12,t.next=15,s.a.post(Xt.URL+"api/v1/auth/users/",{email:l,displayed:u,username:o,password:c,foreign_avatar_url:d});case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](12),console.log("already exist");case 20:return t.prev=20,t.next=23,n("loginUser",{username:o,password:c});case 23:r("setGlobalLoading",!1),t.next=31;break;case 26:throw t.prev=26,t.t1=t["catch"](20),r("setGlobalLoading",!1),Kt(t.t1,r),t.t1;case 31:case"end":return t.stop()}}),t,null,[[12,17],[20,26]])})))()},updateUserProfile:function(e,t){var r=e.commit;r("updateUser",t)},getUsersOnline:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,s.a.get(Xt.URL+"api/v1/auth/online/");case 4:n=t.sent,r("setUsersOnline",n.data.users_online),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),t.t0.message=null;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},getters:{getAuthToken:function(e){return e.auth_token},getCurrentUser:function(e){return e.user},getUsersList:function(e){return e.usersList},getUsersOnline:function(e){return e.usersOnline}}}),Qt={state:{allForumsList:null,currentForumChildrenList:null},mutations:{getAllForums:function(e,t){e.allForumsList=t},getForumChildren:function(e,t){e.currentForumChildrenList=t}},actions:{getAllForums:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("clearError"),t.prev=2,t.next=5,s.a.get(Xt.URL+"api/v1/forum/all/");case 5:n=t.sent.data,r("getAllForums",n),t.next=13;break;case 9:throw t.prev=9,t.t0=t["catch"](2),Kt(t.t0,r),t.t0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()},getCurrentForumById:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.dispatch,n("clearError"),r.prev=2,r.next=5,s.a.get(Xt.URL+"api/v1/forum/"+t+"/");case 5:return i=r.sent.data,r.next=8,a("setCurrentForum",i);case 8:r.next=14;break;case 10:throw r.prev=10,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},createForum:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("clearError"),r.prev=2,r.next=5,s.a.post(Xt.URL+"api/v1/forum/add/",t);case 5:r.next=11;break;case 7:throw r.prev=7,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 11:case"end":return r.stop()}}),r,null,[[2,7]])})))()},editForum:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("clearError"),r.prev=2,r.next=5,s.a.put(Xt.URL+"api/v1/forum/"+t.id+"/",t);case 5:r.next=11;break;case 7:throw r.prev=7,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 11:case"end":return r.stop()}}),r,null,[[2,7]])})))()},deleteForum:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.dispatch,a=e.getters,n("clearError"),r.prev=2,r.next=5,s.a.delete(Xt.URL+"api/v1/forum/"+t.id+"/");case 5:return i=a.getAllForumsList,o=i.indexOf(t),i.splice(o,1),r.next=10,zt.push("/forum/1/1/1/");case 10:n("getAllForums",i),r.next=17;break;case 13:throw r.prev=13,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 17:case"end":return r.stop()}}),r,null,[[2,13]])})))()},getForumChildren:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("clearError"),r.prev=2,r.next=5,s.a.get(Xt.URL+"api/v1/forum/"+t.id+"/children/");case 5:a=r.sent,n("getForumChildren",a.data),r.next=13;break;case 9:throw r.prev=9,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 13:case"end":return r.stop()}}),r,null,[[2,9]])})))()},addForumMember:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.getters,n("clearError"),r.prev=2,r.next=5,s.a.post(Xt.URL+"api/v1/forum/"+t.forum.id+"/membership/"+t.user.id+"/");case 5:i=a.getCurrentForum,i.members.push(t.user.id),n("setCurrentForum",i),r.next=14;break;case 10:throw r.prev=10,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},removeForumMember:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.getters,n("clearError"),r.prev=2,r.next=5,s.a.delete(Xt.URL+"api/v1/forum/"+t.forum.id+"/membership/"+t.user.id+"/");case 5:i=a.getCurrentForum,o=i.members.indexOf(t.user.id),i.members.splice(o,1),n("setCurrentForum",i),r.next=15;break;case 11:throw r.prev=11,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 15:case"end":return r.stop()}}),r,null,[[2,11]])})))()}},getters:{getAllForumsList:function(e){return e.allForumsList},getCurrentForumChildren:function(e){return e.currentForumChildrenList}}},Yt={state:{allBranchesList:null,currentBranchChildrenList:[],branchNextPageUrl:null,branchPreviousPageUrl:null},mutations:{setAllBranches:function(e,t){e.allBranchesList=t},setBranchChildren:function(e,t){e.currentBranchChildrenList=t?t.concat(e.currentBranchChildrenList):[]},setBranchNextPageUrl:function(e,t){e.branchNextPageUrl=t},setBranchPreviousPageUrl:function(e,t){e.branchPreviousPageUrl=t}},actions:{getAllBranches:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("clearError"),t.prev=2,t.next=5,s.a.get(Xt.URL+"api/v1/branch/all/");case 5:n=t.sent.data,r("setAllBranches",n),t.next=13;break;case 9:throw t.prev=9,t.t0=t["catch"](2),Kt(t.t0,r),t.t0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()},getCurrentBranchById:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.dispatch,n("clearError"),r.prev=2,r.next=5,s.a.get(Xt.URL+"api/v1/branch/"+t+"/");case 5:return i=r.sent.data,r.next=8,a("setCurrentBranch",i);case 8:r.next=14;break;case 10:throw r.prev=10,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},createBranch:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("clearError"),r.prev=2,r.next=5,s.a.post(Xt.URL+"api/v1/branch/add/",t);case 5:r.next=11;break;case 7:throw r.prev=7,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 11:case"end":return r.stop()}}),r,null,[[2,7]])})))()},editBranch:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("clearError"),r.prev=2,r.next=5,s.a.put(Xt.URL+"api/v1/branch/"+t.id+"/",t);case 5:r.next=11;break;case 7:throw r.prev=7,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 11:case"end":return r.stop()}}),r,null,[[2,7]])})))()},deleteBranch:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.dispatch,i=e.getters,n("clearError"),r.prev=2,r.next=5,s.a.delete(Xt.URL+"api/v1/branch/"+t.id+"/");case 5:return r.next=7,a("getForumChildren",i.getCurrentForum);case 7:return r.next=9,zt.push("/forum/1/1/");case 9:r.next=15;break;case 11:throw r.prev=11,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 15:case"end":return r.stop()}}),r,null,[[2,11]])})))()},getBranchChildren:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i,o,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.dispatch,t.lazy||n("setPrimaryLoading",!0),t.url?(i=Xt.URL+t.url.split(":")[2].substr(5),a("setCurrentBranchScrollStart",!1)):i=Xt.URL+"api/v1/branch/"+t.branch.id+"/children/",n("clearError"),r.prev=4,r.next=7,s.a.get(i);case 7:o=r.sent,o.data.next?n("setBranchNextPageUrl",o.data.next):n("setBranchNextPageUrl",null),o.data.previous?n("setBranchPreviousPageUrl",o.data.previous):(n("setBranchPreviousPageUrl",null),a("setCurrentBranchBottomScroll",0)),c=o.data.results.reverse(),t.lazy&&(n("setBranchChildren",null),a("setCurrentBranchBottomScroll",0)),n("setBranchChildren",c),n("setPrimaryLoading",!1),r.next=21;break;case 16:throw r.prev=16,r.t0=r["catch"](4),Kt(r.t0,n),n("setPrimaryLoading",!1),r.t0;case 21:case"end":return r.stop()}}),r,null,[[4,16]])})))()},addBranchMember:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.getters,n("clearError"),r.prev=2,r.next=5,s.a.post(Xt.URL+"api/v1/branch/"+t.branch.id+"/membership/"+t.user.id+"/");case 5:i=a.getCurrentBranch,i.members.push(t.user.id),n("setCurrentBranch",i),r.next=14;break;case 10:throw r.prev=10,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},removeBranchMember:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.getters,n("clearError"),r.prev=2,r.next=5,s.a.delete(Xt.URL+"api/v1/branch/"+t.branch.id+"/membership/"+t.user.id+"/");case 5:i=a.getCurrentBranch,o=i.members.indexOf(t.user.id),i.members.splice(o,1),n("setCurrentBranch",i),r.next=15;break;case 11:throw r.prev=11,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 15:case"end":return r.stop()}}),r,null,[[2,11]])})))()},clearBranchChildren:function(e){var t=e.commit;t("setBranchChildren")}},getters:{getAllBranchesList:function(e){return e.allBranchesList},getCurrentBranchChildren:function(e){return e.currentBranchChildrenList},getBranchNextPageUrl:function(e){return e.branchNextPageUrl},getBranchPreviousPageUrl:function(e){return e.branchPreviousPageUrl}}},er={state:{allPostsList:null},mutations:{getAllThreads:function(e,t){e.allThreadsList=t}},actions:{getAllPosts:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("clearError"),t.prev=2,t.next=5,s.a.get(Xt.URL+"api/v1/post/all/");case 5:n=t.sent.data,r("getAllPosts",n),t.next=13;break;case 9:throw t.prev=9,t.t0=t["catch"](2),Kt(t.t0,r),t.t0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()},createPost:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.dispatch,i=e.getters,n("clearError"),r.prev=2,r.next=5,s.a.post(Xt.URL+"api/v1/post/add/",t);case 5:return n("setCurrentThreadBottomScroll",0),o=i.getCurrentThreadChildren,n("setThreadChildren",null),n("setThreadChildren",o),r.next=11,a("getThreadChildren",{thread:i.getCurrentThread,lazy:!0});case 11:r.next=17;break;case 13:throw r.prev=13,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 17:case"end":return r.stop()}}),r,null,[[2,13]])})))()},editPost:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.dispatch,i=e.getters,n("clearError"),r.prev=2,r.next=5,s.a.put(Xt.URL+"api/v1/post/"+t.id+"/",t);case 5:return n("setThreadChildren",null),r.next=8,a("getThreadChildren",{thread:i.getCurrentThread});case 8:r.next=14;break;case 10:throw r.prev=10,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},deletePost:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.dispatch,a=e.getters,n("clearError"),r.prev=2,r.next=5,s.a.delete(Xt.URL+"api/v1/post/"+t.id+"/");case 5:for(i=a.getCurrentThreadChildren,o=0;o<i.length;o++)i[o].id===t.id&&i.splice(o,1);n("setThreadChildren",null),n("setThreadChildren",i),r.next=15;break;case 11:throw r.prev=11,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 15:case"end":return r.stop()}}),r,null,[[2,11]])})))()},likePost:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.dispatch,e.getters,n("clearError"),r.prev=2,r.next=5,s.a.post(Xt.URL+"api/v1/post/"+t.id+"/like/",{like:!0});case 5:r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](2),304!==r.t0.code&&Kt(r.t0,n);case 10:case"end":return r.stop()}}),r,null,[[2,7]])})))()},dislikePost:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.dispatch,e.getters,n("clearError"),r.prev=2,r.next=5,s.a.post(Xt.URL+"api/v1/post/"+t.id+"/like/",{like:!1});case 5:r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](2),304!==r.t0.code&&Kt(r.t0,n);case 10:case"end":return r.stop()}}),r,null,[[2,7]])})))()}},getters:{getAllPostsList:function(e){return e.allPostsList}}},tr={state:{allThreadsList:null,currentThreadChildrenList:[],threadNextPageUrl:null,threadPreviousPageUrl:null},mutations:{setAllThreads:function(e,t){e.allThreadsList=t},setThreadChildren:function(e,t){e.currentThreadChildrenList=t?t.concat(e.currentThreadChildrenList):[]},setThreadNextPageUrl:function(e,t){e.threadNextPageUrl=t},setThreadPreviousPageUrl:function(e,t){e.threadPreviousPageUrl=t}},actions:{getAllThreads:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("clearError"),t.prev=2,t.next=5,s.a.get(Xt.URL+"api/v1/thread/all/");case 5:n=t.sent.data,r("setAllThreads",n),t.next=13;break;case 9:throw t.prev=9,t.t0=t["catch"](2),Kt(t.t0,r),t.t0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()},getCurrentThreadById:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.dispatch,n("clearError"),r.prev=2,r.next=5,s.a.get(Xt.URL+"api/v1/thread/"+t+"/");case 5:return i=r.sent.data,r.next=8,a("setCurrentThread",i);case 8:r.next=14;break;case 10:throw r.prev=10,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},createThread:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.dispatch,i=e.getters,n("clearError"),r.prev=2,r.next=5,s.a.post(Xt.URL+"api/v1/thread/add/",t);case 5:return n("setCurrentBranchBottomScroll",0),o=i.getCurrentBranchChildren,n("setBranchChildren",null),n("setBranchChildren",o),r.next=11,a("getBranchChildren",{branch:i.getCurrentBranch,lazy:!0});case 11:r.next=17;break;case 13:throw r.prev=13,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 17:case"end":return r.stop()}}),r,null,[[2,13]])})))()},editThread:function(e,t,r,n){return Object(h["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.commit,i("clearError"),a.prev=2,a.next=5,s.a.put(Xt.URL+"api/v1/thread/"+t.id+"/",t);case 5:return i("setBranchChildren",null),a.next=8,r("getBranchChildren",{branch:n.getCurrentBranch});case 8:a.next=14;break;case 10:throw a.prev=10,a.t0=a["catch"](2),Kt(a.t0,i),a.t0;case 14:case"end":return a.stop()}}),a,null,[[2,10]])})))()},deleteThread:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.dispatch,a=e.getters,n("clearError"),r.prev=2,r.next=5,s.a.delete(Xt.URL+"api/v1/thread/"+t.id+"/");case 5:for(i=a.getCurrentBranchChildren,o=0;o<i.length;o++)i[o].id===t.id&&i.splice(o,1);n("setBranchChildren",null),n("setBranchChildren",i),t.id===a.getCurrentThread.id&&n("setCurrentThread",null),r.next=16;break;case 12:throw r.prev=12,r.t0=r["catch"](2),Kt(r.t0,n),r.t0;case 16:case"end":return r.stop()}}),r,null,[[2,12]])})))()},getThreadChildren:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,i,o,c,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.dispatch,i=e.getters,i.getBranchInPrimary&&!t.lazy?n("setSecondaryLoading",!0):t.lazy||n("setPrimaryLoading",!0),t.url?(o=Xt.URL+t.url.split(":")[2].substr(5),a("setCurrentThreadScrollStart",!1)):o=Xt.URL+"api/v1/thread/"+t.thread.id+"/children/",n("clearError"),r.prev=4,r.next=7,s.a.get(o);case 7:c=r.sent,c.data.next?n("setThreadNextPageUrl",c.data.next):n("setThreadNextPageUrl",null),c.data.previous?n("setThreadPreviousPageUrl",c.data.previous):(n("setThreadPreviousPageUrl",null),a("setCurrentThreadBottomScroll",0)),u=c.data.results.reverse(),t.lazy&&(n("setThreadChildren",null),a("setCurrentThreadBottomScroll",0)),n("setThreadChildren",u),i.getBranchInPrimary?n("setSecondaryLoading",!1):n("setPrimaryLoading",!1),r.next=23;break;case 16:throw r.prev=16,r.t0=r["catch"](4),n("setSecondaryLoading",!1),n("setPrimaryLoading",!1),Kt(r.t0,n),i.getBranchInPrimary?n("setSecondaryLoading",!1):n("setPrimaryLoading",!1),r.t0;case 23:case"end":return r.stop()}}),r,null,[[4,16]])})))()},likeThread:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.dispatch,e.getters,n("clearError"),r.prev=2,r.next=5,s.a.post(Xt.URL+"api/v1/thread/"+t.id+"/like/",{like:!0});case 5:r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](2),304!==r.t0.code&&Kt(r.t0,n);case 10:case"end":return r.stop()}}),r,null,[[2,7]])})))()},dislikeThread:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.dispatch,e.getters,n("clearError"),r.prev=2,r.next=5,s.a.post(Xt.URL+"api/v1/thread/"+t.id+"/like/",{like:!1});case 5:r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](2),304!==r.t0.code&&Kt(r.t0,n);case 10:case"end":return r.stop()}}),r,null,[[2,7]])})))()},clearThreadChildren:function(e){var t=e.commit;t("setThreadChildren")}},getters:{getAllThreadsList:function(e){return e.allThreadsList},getCurrentThreadChildren:function(e){return e.currentThreadChildrenList},getThreadNextPageUrl:function(e){return e.threadNextPageUrl},getThreadPreviousPageUrl:function(e){return e.threadPreviousPageUrl}}},rr={state:{branchInPrimary:!0,doubleViewsMode:!0,currentForum:null,currentBranch:null,currentThread:null,currentBranchBottomScroll:null,currentThreadBottomScroll:null,currentBranchScrollStart:!0,currentThreadScrollStart:!0,localLoaderHeight:100,accountSettingsIsShown:!1},mutations:{setBranchInPrimary:function(e,t){e.doubleViewsMode||(e.branchInPrimary=t)},setDoubleViewsMode:function(e,t){e.doubleViewsMode=t},setCurrentForum:function(e,t){e.currentForum=t},setCurrentBranch:function(e,t){e.currentBranch=t},setCurrentThread:function(e,t){e.currentThread=t},setCurrentBranchBottomScroll:function(e,t){e.currentBranchBottomScroll=t},setCurrentThreadBottomScroll:function(e,t){e.currentThreadBottomScroll=t},setCurrentBranchScrollStart:function(e,t){e.currentBranchScrollStart=t},setCurrentThreadScrollStart:function(e,t){e.currentThreadScrollStart=t},setAccountSettingsWindowStatus:function(e,t){e.accountSettingsIsShown=t}},actions:{setBranchInPrimary:function(e,t){var r=e.commit;r("setBranchInPrimary",t)},setDoubleViewsMode:function(e,t){var r=e.commit;r("setDoubleViewsMode",t)},setCurrentForum:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.commit,a=e.dispatch,s=e.state,s.currentForum&&(i=s.currentForum.id),i===t.id){r.next=7;break}return n("setCurrentForum",t),r.next=6,a("getForumChildren",t);case 6:localStorage.setItem("currentForumId",t.id);case 7:case"end":return r.stop()}}),r)})))()},setCurrentBranch:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.commit,a=e.dispatch,s=e.state,s.currentBranch&&(i=s.currentBranch.id),i===t.id){r.next=9;break}return n("setCurrentBranch",t),n("setBranchChildren",null),r.next=7,a("getBranchChildren",{branch:t});case 7:localStorage.setItem("currentBranchId",t.id),n("setCurrentBranchScrollStart",!0);case 9:case"end":return r.stop()}}),r)})))()},setCurrentThread:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.commit,a=e.dispatch,s=e.state,s.currentThread&&(i=s.currentThread.id),i===t.id){r.next=9;break}return n("setCurrentThread",t),n("setThreadChildren",null),r.next=7,a("getThreadChildren",{thread:t});case 7:localStorage.setItem("currentThreadId",t.id),n("setCurrentThreadScrollStart",!0);case 9:case"end":return r.stop()}}),r)})))()},getForumValues:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i,o,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.commit,n=e.dispatch,a=e.getters,s=+t.currentForumId,i=+t.currentBranchId,o=+t.currentThreadId,c=a.getAllForumsList,s||(s=1),c){r.next=8;break}return r.abrupt("return","");case 8:if(c.forEach(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.id!==s){e.next=3;break}return e.next=3,n("setCurrentForum",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i){r.next=13;break}return r.abrupt("return","");case 13:if(!i){r.next=18;break}return r.next=16,n("getCurrentBranchById",i);case 16:return r.next=18,n("setCurrentBranch",a.getCurrentBranch);case 18:if(o){r.next=22;break}return r.abrupt("return","");case 22:if(!o){r.next=27;break}return r.next=25,n("getCurrentThreadById",o);case 25:return r.next=27,n("setCurrentThread",a.getCurrentThread);case 27:case"end":return r.stop()}}),r)})))()},setCurrentBranchBottomScroll:function(e,t){var r=e.commit;r("setCurrentBranchBottomScroll",t)},setCurrentThreadBottomScroll:function(e,t){var r=e.commit;r("setCurrentThreadBottomScroll",t)},setCurrentBranchScrollStart:function(e,t){var r=e.commit;r("setCurrentBranchScrollStart",t)},setCurrentThreadScrollStart:function(e,t){var r=e.commit;r("setCurrentThreadScrollStart",t)},setAccountSettingsWindowStatus:function(e,t){var r=e.commit,n=document.getElementsByClassName("account_settings")[0];!0===t?(n.style.top="0",r("setAccountSettingsWindowStatus",!0)):(n.style.top="-200px",r("setAccountSettingsWindowStatus",!1))}},getters:{getBranchInPrimary:function(e){return e.branchInPrimary},getDoubleViewsModeStatus:function(e){return e.doubleViewsMode},getCurrentForum:function(e){return e.currentForum},getCurrentBranch:function(e){return e.currentBranch},getCurrentThread:function(e){return e.currentThread},getCurrentBranchBottomScroll:function(e){return e.currentBranchBottomScroll},getCurrentThreadBottomScroll:function(e){return e.currentThreadBottomScroll},getCurrentBranchScrollStart:function(e){return e.currentBranchScrollStart},getCurrentThreadScrollStart:function(e){return e.currentThreadScrollStart},getLocalLoaderHeight:function(e){return e.localLoaderHeight},accountSettingsIsShown:function(e){return e.accountSettingsIsShown}}};n["a"].use(Gt["a"]);var nr=new Gt["a"].Store({modules:{authorization:Jt,common:qt,forumCondition:rr,forums:Qt,branches:Yt,topics:er,threads:tr}});n["a"].config.productionTip=!1,n["a"].config.silent=!1,n["a"].config.ignoredElements=["vue-emoji-mart-picker"],new n["a"]({router:zt,vuetify:Mt,store:nr,render:function(e){return e(Ae)},created:function(){var e={apiKey:"AIzaSyCfQOtMhNhq-bhUmn4vgG4j9dsHYv6DWwU",authDomain:"jooster-social-auth.firebaseapp.com",databaseURL:"https://jooster-social-auth.firebaseio.com",projectId:"jooster-social-auth",storageBucket:"jooster-social-auth.appspot.com",messagingSenderId:"567687865071",appId:"1:567687865071:web:077238f32ed8dc1c12b11a",measurementId:"G-GC2QB2QDZG"};Wt.a.initializeApp(e)}}).$mount("#app")},"56de":function(e,t,r){"use strict";var n=r("457f"),a=r.n(n);a.a},5966:function(e,t,r){"use strict";var n=r("af6a"),a=r.n(n);a.a},"59df":function(e,t,r){},"5c0b":function(e,t,r){"use strict";var n=r("7694"),a=r.n(n);a.a},6842:function(e,t,r){},"71c5":function(e,t,r){"use strict";var n=r("f3a0"),a=r.n(n);a.a},7694:function(e,t,r){},"782c":function(e,t,r){},"7cf9":function(e,t,r){"use strict";var n=r("782c"),a=r.n(n);a.a},"942c":function(e,t,r){"use strict";var n=r("53fe"),a=r.n(n);a.a},"9d7a":function(e,t,r){},aef9:function(e,t,r){"use strict";var n=r("2275"),a=r.n(n);a.a},af5a:function(e,t,r){"use strict";var n=r("4d76"),a=r.n(n);a.a},af6a:function(e,t,r){},b5a5:function(e,t,r){"use strict";var n=r("d9d2"),a=r.n(n);a.a},c42a:function(e,t,r){"use strict";var n=r("2bdd"),a=r.n(n);a.a},d499:function(e,t,r){"use strict";var n=r("59df"),a=r.n(n);a.a},d9d2:function(e,t,r){},f3a0:function(e,t,r){},f48d:function(e,t,r){"use strict";var n=r("44f4"),a=r.n(n);a.a},fd54:function(e,t,r){}});
//# sourceMappingURL=app.77fb0b6b.js.map